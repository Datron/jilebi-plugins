{"version":3,"file":"index.js","sources":["index.ts"],"sourcesContent":["/**\r\n * NixOS Jilebi Plugin\r\n * Provides comprehensive NixOS, Home Manager, nix-darwin, and NixHub API access\r\n *\r\n * Ported from mcp-nixos Python MCP server to Jilebi plugin format\r\n */\r\n\r\n// Jilebi Plugin Response Types\r\ninterface JilebiTextContent {\r\n  type: \"text\";\r\n  text: string;\r\n}\r\n\r\ninterface JilebiToolResponse {\r\n  content: JilebiTextContent[];\r\n  isError?: boolean;\r\n}\r\n\r\n// Environment interface for accessing configuration\r\ninterface Environment {\r\n  ELASTICSEARCH_URL?: string;\r\n}\r\n\r\n// API Configuration\r\nconst NIXOS_API = \"https://search.nixos.org/backend\";\r\nconst NIXOS_AUTH_USER = \"aWVSALXpZv\";\r\nconst NIXOS_AUTH_PASS = \"X8gPHnzL52wFEekuxsfQ9cSh\";\r\n\r\n// Base channel patterns\r\nconst BASE_CHANNELS: Record<string, string> = {\r\n  unstable: \"nixos-unstable\",\r\n  \"24.11\": \"nixos-24.11\",\r\n  \"25.05\": \"nixos-25.05\",\r\n};\r\n\r\n// Fallback channels when API discovery fails\r\nconst FALLBACK_CHANNELS: Record<string, string> = {\r\n  unstable: \"latest-44-nixos-unstable\",\r\n  stable: \"latest-44-nixos-25.05\",\r\n  \"25.05\": \"latest-44-nixos-25.05\",\r\n  \"25.11\": \"latest-44-nixos-25.11\",\r\n  beta: \"latest-44-nixos-25.05\",\r\n};\r\n\r\nconst HOME_MANAGER_URL =\r\n  \"https://nix-community.github.io/home-manager/options.xhtml\";\r\nconst DARWIN_URL = \"https://nix-darwin.github.io/nix-darwin/manual/index.html\";\r\n\r\n// Channel Cache Class\r\nclass ChannelCache {\r\n  private availableChannels: Record<string, string> | null = null;\r\n  private resolvedChannels: Record<string, string> | null = null;\r\n  private usingFallback: boolean = false;\r\n\r\n  async getAvailable(): Promise<Record<string, string>> {\r\n    console.log(' getAvailable: checking cache');\r\n    if (this.availableChannels === null) {\r\n      console.log(' getAvailable: cache miss, discovering channels');\r\n      this.availableChannels = await this.discoverAvailableChannels();\r\n    } else {\r\n      console.log(' getAvailable: cache hit');\r\n    }\r\n    return this.availableChannels || {};\r\n  }\r\n\r\n  async getResolved(): Promise<Record<string, string>> {\r\n    console.log(' getResolved: checking cache');\r\n    if (this.resolvedChannels === null) {\r\n      console.log(' getResolved: cache miss, resolving channels');\r\n      this.resolvedChannels = await this.resolveChannels();\r\n    } else {\r\n      console.log(' getResolved: cache hit');\r\n    }\r\n    return this.resolvedChannels || {};\r\n  }\r\n\r\n  isUsingFallback(): boolean {\r\n    return this.usingFallback;\r\n  }\r\n\r\n  private async discoverAvailableChannels(\r\n  ): Promise<Record<string, string>> {\r\n    console.log(' discoverAvailableChannels: starting channel discovery');\r\n    const generations = [43, 44, 45, 46];\r\n    const versions = [\"unstable\", \"25.05\", \"25.11\", \"26.05\", \"30.05\"];\r\n    const available: Record<string, string> = {};\r\n\r\n    for (const gen of generations) {\r\n      for (const version of versions) {\r\n        const pattern = `latest-${gen}-nixos-${version}`;\r\n        try {\r\n          const url = `${NIXOS_API}/${pattern}/_count`;\r\n          const auth = btoa(`${NIXOS_AUTH_USER}:${NIXOS_AUTH_PASS}`);\r\n          console.log(` discoverAvailableChannels: checking pattern ${pattern}`);\r\n\r\n          const response = await fetch(url, {\r\n            method: \"POST\",\r\n            headers: {\r\n              Authorization: `Basic ${auth}`,\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({ query: { match_all: {} } }),\r\n          });\r\n\r\n          if (response.status === 200) {\r\n            const data = await response.json();\r\n            const count = data.count || 0;\r\n            if (count > 0) {\r\n              console.log(` discoverAvailableChannels: found ${pattern} with ${count} documents`);\r\n              available[pattern] = `${count.toLocaleString()} documents`;\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.log(` discoverAvailableChannels: pattern ${pattern} unavailable - ${error}`);\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log(` discoverAvailableChannels: discovery complete, found ${Object.keys(available).length} channels`);\r\n    return available;\r\n  }\r\n\r\n  private async resolveChannels(): Promise<Record<string, string>> {\r\n    console.log(' resolveChannels: starting channel resolution');\r\n    const available = await this.getAvailable();\r\n    const resolved: Record<string, string> = {};\r\n\r\n    if (Object.keys(available).length === 0) {\r\n      console.warn(' resolveChannels: no channels discovered, using fallback');\r\n      this.usingFallback = true;\r\n      return FALLBACK_CHANNELS;\r\n    }\r\n\r\n    // Map user-friendly names to actual indices\r\n    for (const [name, baseChannel] of Object.entries(BASE_CHANNELS)) {\r\n      let found = false;\r\n      for (const [pattern, _] of Object.entries(available)) {\r\n        if (pattern.includes(baseChannel)) {\r\n          console.log(` resolveChannels: mapped ${name} -> ${pattern}`);\r\n          resolved[name] = pattern;\r\n          found = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!found && FALLBACK_CHANNELS[name]) {\r\n        console.log(` resolveChannels: using fallback for ${name} -> ${FALLBACK_CHANNELS[name]}`);\r\n        resolved[name] = FALLBACK_CHANNELS[name];\r\n      }\r\n    }\r\n\r\n    // Find current stable\r\n    const stableVersions = Object.keys(available)\r\n      .filter((k) => k.match(/latest-\\d+-nixos-\\d+\\.\\d+$/))\r\n      .sort()\r\n      .reverse();\r\n\r\n    if (stableVersions.length > 0) {\r\n      console.log(` resolveChannels: mapped stable -> ${stableVersions[0]}`);\r\n      resolved[\"stable\"] = stableVersions[0];\r\n    } else if (FALLBACK_CHANNELS[\"stable\"]) {\r\n      console.log(` resolveChannels: using fallback for stable`);\r\n      resolved[\"stable\"] = FALLBACK_CHANNELS[\"stable\"];\r\n    }\r\n\r\n    console.log(` resolveChannels: resolution complete, ${Object.keys(resolved).length} channels resolved`);\r\n    return resolved;\r\n  }\r\n}\r\n\r\n// Global channel cache instance\r\nconst channelCache = new ChannelCache();\r\n\r\n// Helper Functions\r\nfunction createError(message: string, errorType?: string): string {\r\n  return errorType ? `ERROR [${errorType}]: ${message}` : `ERROR: ${message}`;\r\n}\r\n\r\nasync function getChannels(): Promise<Record<string, string>> {\r\n  console.log(' getChannels: fetching resolved channels');\r\n  return await channelCache.getResolved();\r\n}\r\n\r\nfunction getChannelSuggestions(\r\n  channel: string,\r\n  channels: Record<string, string>,\r\n): string {\r\n  const available = Object.keys(channels).join(\", \");\r\n  return `Available channels: ${available}`;\r\n}\r\n\r\nasync function esQuery(\r\n  index: string,\r\n  query: any,\r\n  size: number = 20,\r\n): Promise<any[]> {\r\n  console.log(` esQuery: querying index=\"${index}\" with size=${size}`);\r\n  try {\r\n    const url = `${NIXOS_API}/${index}/_search`;\r\n    const auth = btoa(`${NIXOS_AUTH_USER}:${NIXOS_AUTH_PASS}`);\r\n    console.log(` esQuery: url=${url}`);\r\n\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: `Basic ${auth}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ query, size }),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (data && data.hits && data.hits.hits) {\r\n      console.log(` esQuery: retrieved ${data.hits.hits.length} hits from index ${index}`);\r\n      return data.hits.hits;\r\n    }\r\n    console.warn(` esQuery: no hits found in response from index ${index}`);\r\n    return [];\r\n  } catch (error) {\r\n    console.error(` esQuery: API error for index ${index}:`, error);\r\n    throw new Error(\r\n      `API error: ${error instanceof Error ? error.message : String(error)}`,\r\n    );\r\n  }\r\n}\r\n\r\nasync function parseHtmlOptions(\r\n  url: string,\r\n  query: string = \"\",\r\n  prefix: string = \"\",\r\n  limit: number = 100,\r\n): Promise<Array<{ name: string; description: string; type: string }>> {\r\n  console.log(` parseHtmlOptions: fetching from ${url}, query=\"${query}\", prefix=\"${prefix}\", limit=${limit}`);\r\n  try {\r\n    const response = await fetch(url);\r\n    const html = await response.text();\r\n\r\n    // Convert HTML to markdown for easier parsing\r\n    const markdown = html2markdown(html);\r\n\r\n    // Parse options from the HTML\r\n    // This is a simplified version - in production, you'd want more robust parsing\r\n    const options: Array<{ name: string; description: string; type: string }> =\r\n      [];\r\n\r\n    // Match option patterns in the HTML\r\n    const optionPattern = /id=\"opt-([^\"]+)\"/g;\r\n    let match;\r\n\r\n    while (\r\n      (match = optionPattern.exec(html)) !== null &&\r\n      options.length < limit\r\n    ) {\r\n      let name = match[1];\r\n\r\n      // Convert underscores back to <name> placeholders\r\n      name = name.replace(/_name_/g, \"<name>\");\r\n\r\n      // Filter by query or prefix\r\n      if (query && !name.toLowerCase().includes(query.toLowerCase())) {\r\n        continue;\r\n      }\r\n      if (prefix && !name.startsWith(prefix + \".\") && name !== prefix) {\r\n        continue;\r\n      }\r\n\r\n      // Extract description and type (simplified)\r\n      const descMatch = html.match(\r\n        new RegExp(`id=\"opt-${match[1]}\"[^>]*>.*?<dd[^>]*>(.*?)</dd>`, \"s\"),\r\n      );\r\n      let description = \"\";\r\n      let type = \"\";\r\n\r\n      if (descMatch) {\r\n        const ddContent = descMatch[1];\r\n        // Remove HTML tags for description\r\n        description = ddContent\r\n          .replace(/<[^>]+>/g, \" \")\r\n          .trim()\r\n          .substring(0, 200);\r\n\r\n        // Try to extract type\r\n        const typeMatch = ddContent.match(/Type:\\s*([^<\\n]+)/);\r\n        if (typeMatch) {\r\n          type = typeMatch[1].trim();\r\n        }\r\n      }\r\n\r\n      options.push({ name, description, type });\r\n    }\r\n\r\n    return options;\r\n  } catch (error) {\r\n    throw new Error(\r\n      `Failed to fetch docs: ${error instanceof Error ? error.message : String(error)}`,\r\n    );\r\n  }\r\n}\r\n\r\nfunction stripHtmlTags(text: string): string {\r\n  if (!text) return \"\";\r\n  let result = text\r\n    .replace(/<rendered-html>/g, \"\")\r\n    .replace(/<\\/rendered-html>/g, \"\");\r\n  result = result.replace(/<[^>]+>/g, \"\");\r\n  return result.trim();\r\n}\r\n\r\nfunction versionKey(version: string): number[] {\r\n  const parts = version.split(/[.-]/).map((p) => {\r\n    const num = parseInt(p, 10);\r\n    return isNaN(num) ? 0 : num;\r\n  });\r\n  return parts;\r\n}\r\n\r\nfunction compareVersions(a: string, b: string): number {\r\n  const aKey = versionKey(a);\r\n  const bKey = versionKey(b);\r\n\r\n  for (let i = 0; i < Math.max(aKey.length, bKey.length); i++) {\r\n    const aPart = aKey[i] || 0;\r\n    const bPart = bKey[i] || 0;\r\n    if (aPart !== bPart) {\r\n      return bPart - aPart;\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n\r\n// Tool Functions\r\n\r\nexport async function nixos_search(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` nixos_search: starting search - query=\"${request.query}\", type=${request.search_type || 'packages'}, channel=${request.channel || 'unstable'}, limit=${request.limit || 20}`);\r\n  try {\r\n    const {\r\n      query,\r\n      search_type = \"packages\",\r\n      limit = 20,\r\n      channel = \"unstable\",\r\n    } = request;\r\n\r\n    if (![\"packages\", \"options\", \"programs\", \"flakes\"].includes(search_type)) {\r\n      console.warn(` nixos_search: invalid search_type \"${search_type}\"`);\r\n      return {\r\n        content: [\r\n          { type: \"text\", text: createError(`Invalid type '${search_type}'`) },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const channels = await getChannels();\r\n    if (!(channel in channels)) {\r\n      console.warn(` nixos_search: invalid channel \"${channel}\"`);\r\n      const suggestions = getChannelSuggestions(channel, channels);\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(`Invalid channel '${channel}'. ${suggestions}`),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n    console.log(` nixos_search: using channel \"${channel}\" -> \"${channels[channel]}\"`);\r\n\r\n    if (limit < 1 || limit > 100) {\r\n      console.warn(` nixos_search: invalid limit ${limit}`);\r\n      return {\r\n        content: [{ type: \"text\", text: createError(\"Limit must be 1-100\") }],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    if (search_type === \"flakes\") {\r\n      console.log(` nixos_search: delegating to nixos_flakes_search`);\r\n      return await nixos_flakes_search(request, env);\r\n    }\r\n\r\n    let esQueryObj: any;\r\n\r\n    if (search_type === \"packages\") {\r\n      esQueryObj = {\r\n        bool: {\r\n          must: [{ term: { type: \"package\" } }],\r\n          should: [\r\n            { match: { package_pname: { query, boost: 3 } } },\r\n            { match: { package_description: query } },\r\n          ],\r\n          minimum_should_match: 1,\r\n        },\r\n      };\r\n    } else if (search_type === \"options\") {\r\n      esQueryObj = {\r\n        bool: {\r\n          must: [{ term: { type: \"option\" } }],\r\n          should: [\r\n            { wildcard: { option_name: `*${query}*` } },\r\n            { match: { option_description: query } },\r\n          ],\r\n          minimum_should_match: 1,\r\n        },\r\n      };\r\n    } else {\r\n      esQueryObj = {\r\n        bool: {\r\n          must: [{ term: { type: \"package\" } }],\r\n          should: [\r\n            { match: { package_programs: { query, boost: 2 } } },\r\n            { match: { package_pname: query } },\r\n          ],\r\n          minimum_should_match: 1,\r\n        },\r\n      };\r\n    }\r\n\r\n    const hits = await esQuery(channels[channel], esQueryObj, limit);\r\n\r\n    if (hits.length === 0) {\r\n      console.log(` nixos_search: no results found for query=\"${query}\" in ${search_type}`);\r\n      return {\r\n        content: [\r\n          { type: \"text\", text: `No ${search_type} found matching '${query}'` },\r\n        ],\r\n      };\r\n    }\r\n\r\n    console.log(` nixos_search: found ${hits.length} results for query=\"${query}\"`);\r\n    const results: string[] = [];\r\n    results.push(`Found ${hits.length} ${search_type} matching '${query}':\\n`);\r\n\r\n    for (const hit of hits) {\r\n      const src = hit._source || {};\r\n\r\n      if (search_type === \"packages\") {\r\n        const name = src.package_pname || \"\";\r\n        const version = src.package_pversion || \"\";\r\n        const desc = src.package_description || \"\";\r\n        results.push(`• ${name} (${version})`);\r\n        if (desc) {\r\n          results.push(`  ${desc}`);\r\n        }\r\n        results.push(\"\");\r\n      } else if (search_type === \"options\") {\r\n        const name = src.option_name || \"\";\r\n        const optType = src.option_type || \"\";\r\n        let desc = src.option_description || \"\";\r\n        desc = stripHtmlTags(desc);\r\n        results.push(`• ${name}`);\r\n        if (optType) {\r\n          results.push(`  Type: ${optType}`);\r\n        }\r\n        if (desc) {\r\n          results.push(`  ${desc}`);\r\n        }\r\n        results.push(\"\");\r\n      } else {\r\n        const programs = src.package_programs || [];\r\n        const pkgName = src.package_pname || \"\";\r\n        const queryLower = query.toLowerCase();\r\n        const matchedPrograms = programs.filter(\r\n          (p: string) => p.toLowerCase() === queryLower,\r\n        );\r\n\r\n        for (const prog of matchedPrograms) {\r\n          results.push(`• ${prog} (provided by ${pkgName})`);\r\n          results.push(\"\");\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log(` nixos_search: returning ${results.length} formatted results`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' nixos_search: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function nixos_info(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` nixos_info: getting info for name=\"${request.name}\", type=${request.type || 'package'}, channel=${request.channel || 'unstable'}`);\r\n  try {\r\n    const { name, type = \"package\", channel = \"unstable\" } = request;\r\n\r\n    if (![\"package\", \"option\"].includes(type)) {\r\n      console.warn(` nixos_info: invalid type \"${type}\"`);\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(\"Type must be 'package' or 'option'\"),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const channels = await getChannels();\r\n    if (!(channel in channels)) {\r\n      console.warn(` nixos_info: invalid channel \"${channel}\"`);\r\n      const suggestions = getChannelSuggestions(channel, channels);\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(`Invalid channel '${channel}'. ${suggestions}`),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const field = type === \"package\" ? \"package_pname\" : \"option_name\";\r\n    const query = {\r\n      bool: {\r\n        must: [{ term: { type } }, { term: { [field]: name } }],\r\n      },\r\n    };\r\n\r\n    const hits = await esQuery(channels[channel], query, 1);\r\n\r\n    if (hits.length === 0) {\r\n      console.log(` nixos_info: ${type} \"${name}\" not found`);\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(\r\n              `${type.charAt(0).toUpperCase() + type.slice(1)} '${name}' not found`,\r\n              \"NOT_FOUND\",\r\n            ),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const src = hits[0]._source || {};\r\n    const info: string[] = [];\r\n\r\n    if (type === \"package\") {\r\n      info.push(`Package: ${src.package_pname || \"\"}`);\r\n      info.push(`Version: ${src.package_pversion || \"\"}`);\r\n\r\n      const desc = src.package_description || \"\";\r\n      if (desc) {\r\n        info.push(`Description: ${desc}`);\r\n      }\r\n\r\n      let homepage = src.package_homepage || [];\r\n      if (homepage.length > 0) {\r\n        if (Array.isArray(homepage)) {\r\n          homepage = homepage[0] || \"\";\r\n        }\r\n        info.push(`Homepage: ${homepage}`);\r\n      }\r\n\r\n      const licenses = src.package_license_set || [];\r\n      if (licenses.length > 0) {\r\n        info.push(`License: ${licenses.join(\", \")}`);\r\n      }\r\n    } else {\r\n      info.push(`Option: ${src.option_name || \"\"}`);\r\n\r\n      const optType = src.option_type || \"\";\r\n      if (optType) {\r\n        info.push(`Type: ${optType}`);\r\n      }\r\n\r\n      let desc = src.option_description || \"\";\r\n      desc = stripHtmlTags(desc);\r\n      if (desc) {\r\n        info.push(`Description: ${desc}`);\r\n      }\r\n\r\n      const defaultVal = src.option_default || \"\";\r\n      if (defaultVal) {\r\n        info.push(`Default: ${defaultVal}`);\r\n      }\r\n\r\n      const example = src.option_example || \"\";\r\n      if (example) {\r\n        info.push(`Example: ${example}`);\r\n      }\r\n    }\r\n\r\n    return {\r\n      content: [{ type: \"text\", text: info.join(\"\\n\") }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' nixos_info: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function nixos_channels(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(' nixos_channels: listing available channels');\r\n  try {\r\n    const configured = await getChannels();\r\n    const available = await channelCache.getAvailable();\r\n\r\n    const results: string[] = [];\r\n\r\n    if (channelCache.isUsingFallback()) {\r\n      results.push(\"WARNING: Using fallback channels (API discovery failed)\");\r\n      results.push(\"    Check network connectivity to search.nixos.org\");\r\n      results.push(\"\");\r\n      results.push(\"NixOS Channels (fallback mode):\\n\");\r\n    } else {\r\n      results.push(\"NixOS Channels (auto-discovered):\\n\");\r\n    }\r\n\r\n    for (const [name, index] of Object.entries(configured).sort()) {\r\n      const status = index in available ? \"✓ Available\" : \"✗ Unavailable\";\r\n      const docCount = available[index] || \"Unknown\";\r\n\r\n      let label = `• ${name}`;\r\n      if (name === \"stable\") {\r\n        const parts = index.split(\"-\");\r\n        if (parts.length >= 4) {\r\n          const version = parts[3];\r\n          label = `• ${name} (current: ${version})`;\r\n        }\r\n      }\r\n\r\n      results.push(`${label} → ${index}`);\r\n      if (index in available) {\r\n        results.push(`  Status: ${status} (${docCount})`);\r\n      } else {\r\n        if (channelCache.isUsingFallback()) {\r\n          results.push(\"  Status: Fallback (may not be current)\");\r\n        } else {\r\n          results.push(`  Status: ${status}`);\r\n        }\r\n      }\r\n      results.push(\"\");\r\n    }\r\n\r\n    if (!channelCache.isUsingFallback()) {\r\n      const configuredValues = new Set(Object.values(configured));\r\n      const discoveredOnly = Object.keys(available).filter(\r\n        (k) => !configuredValues.has(k),\r\n      );\r\n\r\n      if (discoveredOnly.length > 0) {\r\n        results.push(\"Additional available channels:\");\r\n        for (const index of discoveredOnly.sort()) {\r\n          results.push(`• ${index} (${available[index]})`);\r\n        }\r\n      }\r\n    }\r\n\r\n    results.push(\"\\nNote: Channels are dynamically discovered.\");\r\n    results.push(\"'stable' always points to the current stable release.\");\r\n\r\n    if (channelCache.isUsingFallback()) {\r\n      results.push(\r\n        \"\\nWARNING: Fallback channels may not reflect the latest available versions.\",\r\n      );\r\n      results.push(\r\n        \"   Please check your network connection to search.nixos.org.\",\r\n      );\r\n    }\r\n\r\n    console.log(` nixos_channels: found ${Object.keys(configured).length} configured channels`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' nixos_channels: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function nixos_stats(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` nixos_stats: getting stats for channel=${request.channel || 'unstable'}`);\r\n  try {\r\n    const { channel = \"unstable\" } = request;\r\n\r\n\r\n    const channels = await getChannels();\r\n    if (!(channel in channels)) {\r\n      const suggestions = getChannelSuggestions(channel, channels);\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(`Invalid channel '${channel}'. ${suggestions}`),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const index = channels[channel];\r\n    const url = `${NIXOS_API}/${index}/_count`;\r\n    const auth = btoa(`${NIXOS_AUTH_USER}:${NIXOS_AUTH_PASS}`);\r\n\r\n    let pkgCount = 0;\r\n    let optCount = 0;\r\n\r\n    try {\r\n      const pkgResp = await fetch(url, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Basic ${auth}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ query: { term: { type: \"package\" } } }),\r\n      });\r\n      const pkgData = await pkgResp.json();\r\n      pkgCount = pkgData.count || 0;\r\n    } catch (error) {\r\n      // Ignore\r\n    }\r\n\r\n    try {\r\n      const optResp = await fetch(url, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Basic ${auth}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ query: { term: { type: \"option\" } } }),\r\n      });\r\n      const optData = await optResp.json();\r\n      optCount = optData.count || 0;\r\n    } catch (error) {\r\n      // Ignore\r\n    }\r\n\r\n    if (pkgCount === 0 && optCount === 0) {\r\n      return {\r\n        content: [\r\n          { type: \"text\", text: createError(\"Failed to retrieve statistics\") },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const result = `NixOS Statistics for ${channel} channel:\\n• Packages: ${pkgCount.toLocaleString()}\\n• Options: ${optCount.toLocaleString()}`;\r\n\r\n    console.log(` nixos_stats: retrieved stats - packages: ${pkgCount}, options: ${optCount}`);\r\n    return {\r\n      content: [{ type: \"text\", text: result }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' nixos_stats: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function home_manager_search(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` home_manager_search: searching for query=\"${request.query}\", limit=${request.limit || 20}`);\r\n  try {\r\n    const { query, limit = 20 } = request;\r\n\r\n    if (limit < 1 || limit > 100) {\r\n      console.warn(` home_manager_search: invalid limit ${limit}`);\r\n      return {\r\n        content: [{ type: \"text\", text: createError(\"Limit must be 1-100\") }],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const options = await parseHtmlOptions(\r\n      HOME_MANAGER_URL,\r\n      query,\r\n      \"\",\r\n      limit,\r\n    );\r\n\r\n    if (options.length === 0) {\r\n      console.log(` home_manager_search: no results found for query=\"${query}\"`);\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: `No Home Manager options found matching '${query}'`,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n\r\n    console.log(` home_manager_search: found ${options.length} results for query=\"${query}\"`);\r\n\r\n    const results: string[] = [];\r\n    results.push(\r\n      `Found ${options.length} Home Manager options matching '${query}':\\n`,\r\n    );\r\n\r\n    for (const opt of options) {\r\n      results.push(`• ${opt.name}`);\r\n      if (opt.type) {\r\n        results.push(`  Type: ${opt.type}`);\r\n      }\r\n      if (opt.description) {\r\n        results.push(`  ${opt.description}`);\r\n      }\r\n      results.push(\"\");\r\n    }\r\n\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' home_manager_search: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function home_manager_info(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` home_manager_info: getting info for name=\"${request.name}\"`);\r\n  try {\r\n    const { name } = request;\r\n\r\n    const options = await parseHtmlOptions(\r\n      HOME_MANAGER_URL,\r\n      name,\r\n      \"\",\r\n      100,\r\n    );\r\n\r\n    for (const opt of options) {\r\n      if (opt.name === name) {\r\n        const info: string[] = [];\r\n        info.push(`Option: ${name}`);\r\n        if (opt.type) {\r\n          info.push(`Type: ${opt.type}`);\r\n        }\r\n        if (opt.description) {\r\n          info.push(`Description: ${opt.description}`);\r\n        }\r\n        return {\r\n          content: [{ type: \"text\", text: info.join(\"\\n\") }],\r\n        };\r\n      }\r\n    }\r\n\r\n    if (options.length > 0) {\r\n      const suggestions: string[] = [];\r\n      for (const opt of options.slice(0, 5)) {\r\n        if (\r\n          name.toLowerCase().includes(opt.name.toLowerCase()) ||\r\n          opt.name.startsWith(name + \".\")\r\n        ) {\r\n          suggestions.push(opt.name);\r\n        }\r\n      }\r\n\r\n      if (suggestions.length > 0) {\r\n        const msg = `Option '${name}' not found. Did you mean one of these?\\n${suggestions.map((s) => `  • ${s}`).join(\"\\n\")}\\n\\nTip: Use home_manager_options_by_prefix('${name}') to browse all options with this prefix.`;\r\n        return {\r\n          content: [{ type: \"text\", text: createError(msg, \"NOT_FOUND\") }],\r\n          isError: true,\r\n        };\r\n      }\r\n    }\r\n\r\n    const msg = `Option '${name}' not found.\\nTip: Use home_manager_options_by_prefix('${name}') to browse available options.`;\r\n    return {\r\n      content: [{ type: \"text\", text: createError(msg, \"NOT_FOUND\") }],\r\n      isError: true,\r\n    };\r\n  } catch (error) {\r\n    console.error(' home_manager_info: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function home_manager_stats(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(' home_manager_stats: getting Home Manager statistics');\r\n  try {\r\n    const options = await parseHtmlOptions(\r\n      HOME_MANAGER_URL,\r\n      \"\",\r\n      \"\",\r\n      10000,\r\n    );\r\n\r\n    const categories = new Set<string>();\r\n    for (const opt of options) {\r\n      const parts = opt.name.split(\".\");\r\n      if (parts.length > 0) {\r\n        categories.add(parts[0]);\r\n      }\r\n    }\r\n\r\n    const result = `Home Manager Statistics:\\n• Total options: ${options.length.toLocaleString()}\\n• Top-level categories: ${categories.size}`;\r\n\r\n    console.log(` home_manager_stats: found ${options.length} options in ${categories.size} categories`);\r\n    return {\r\n      content: [{ type: \"text\", text: result }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' home_manager_stats: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function home_manager_list_options(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(' home_manager_list_options: listing all option categories');\r\n  try {\r\n    const options = await parseHtmlOptions(\r\n      HOME_MANAGER_URL,\r\n      \"\",\r\n      \"\",\r\n      10000,\r\n    );\r\n\r\n    const categories = new Map<string, number>();\r\n    for (const opt of options) {\r\n      const parts = opt.name.split(\".\");\r\n      if (parts.length > 0) {\r\n        const cat = parts[0];\r\n        categories.set(cat, (categories.get(cat) || 0) + 1);\r\n      }\r\n    }\r\n\r\n    const results: string[] = [];\r\n    results.push(\r\n      `Home Manager Option Categories (${categories.size} total):\\n`,\r\n    );\r\n\r\n    for (const [cat, count] of Array.from(categories.entries()).sort()) {\r\n      results.push(`• ${cat} (${count} options)`);\r\n    }\r\n\r\n    console.log(` home_manager_list_options: found ${categories.size} categories`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\") }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' home_manager_list_options: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function home_manager_options_by_prefix(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` home_manager_options_by_prefix: getting options with prefix=\"${request.prefix}\", limit=${request.limit || 50}`);\r\n  try {\r\n    const { prefix, limit = 50 } = request;\r\n\r\n\r\n    const options = await parseHtmlOptions(\r\n      HOME_MANAGER_URL,\r\n      \"\",\r\n      prefix,\r\n      limit,\r\n    );\r\n\r\n    if (options.length === 0) {\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: `No Home Manager options found with prefix '${prefix}'`,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n\r\n    const results: string[] = [];\r\n    results.push(\r\n      `Home Manager options with prefix '${prefix}' (showing ${options.length}):\\n`,\r\n    );\r\n\r\n    for (const opt of options) {\r\n      results.push(`• ${opt.name}`);\r\n      if (opt.type) {\r\n        results.push(`  Type: ${opt.type}`);\r\n      }\r\n      if (opt.description) {\r\n        results.push(`  ${opt.description}`);\r\n      }\r\n      results.push(\"\");\r\n    }\r\n\r\n    console.log(` home_manager_options_by_prefix: found ${results.length} options with prefix \"${prefix}\"`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' home_manager_options_by_prefix: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function darwin_search(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` darwin_search: searching for query=\"${request.query}\", limit=${request.limit || 20}`);\r\n  try {\r\n    const { query, limit = 20 } = request;\r\n\r\n    if (limit < 1 || limit > 100) {\r\n      console.warn(` darwin_search: invalid limit ${limit}`);\r\n      return {\r\n        content: [{ type: \"text\", text: createError(\"Limit must be 1-100\") }],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const options = await parseHtmlOptions(\r\n      DARWIN_URL,\r\n      query,\r\n      \"\",\r\n      limit,\r\n    );\r\n\r\n    if (options.length === 0) {\r\n      console.log(` darwin_search: no results found for query=\"${query}\"`);\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: `No nix-darwin options found matching '${query}'`,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n\r\n    console.log(` darwin_search: found ${options.length} results for query=\"${query}\"`);\r\n\r\n    const results: string[] = [];\r\n    results.push(\r\n      `Found ${options.length} nix-darwin options matching '${query}':\\n`,\r\n    );\r\n\r\n    for (const opt of options) {\r\n      results.push(`• ${opt.name}`);\r\n      if (opt.type) {\r\n        results.push(`  Type: ${opt.type}`);\r\n      }\r\n      if (opt.description) {\r\n        results.push(`  ${opt.description}`);\r\n      }\r\n      results.push(\"\");\r\n    }\r\n\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' darwin_search: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function darwin_info(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` darwin_info: getting info for name=\"${request.name}\"`);\r\n  try {\r\n    const { name } = request;\r\n\r\n    const options = await parseHtmlOptions(DARWIN_URL, name, \"\", 100);\r\n\r\n    for (const opt of options) {\r\n      if (opt.name === name) {\r\n        const info: string[] = [];\r\n        info.push(`Option: ${name}`);\r\n        if (opt.type) {\r\n          info.push(`Type: ${opt.type}`);\r\n        }\r\n        if (opt.description) {\r\n          info.push(`Description: ${opt.description}`);\r\n        }\r\n        return {\r\n          content: [{ type: \"text\", text: info.join(\"\\n\") }],\r\n        };\r\n      }\r\n    }\r\n\r\n    if (options.length > 0) {\r\n      const suggestions: string[] = [];\r\n      for (const opt of options.slice(0, 5)) {\r\n        if (\r\n          name.toLowerCase().includes(opt.name.toLowerCase()) ||\r\n          opt.name.startsWith(name + \".\")\r\n        ) {\r\n          suggestions.push(opt.name);\r\n        }\r\n      }\r\n\r\n      if (suggestions.length > 0) {\r\n        const msg = `Option '${name}' not found. Did you mean one of these?\\n${suggestions.map((s) => `  • ${s}`).join(\"\\n\")}\\n\\nTip: Use darwin_options_by_prefix('${name}') to browse all options with this prefix.`;\r\n        return {\r\n          content: [{ type: \"text\", text: createError(msg, \"NOT_FOUND\") }],\r\n          isError: true,\r\n        };\r\n      }\r\n    }\r\n\r\n    const msg = `Option '${name}' not found.\\nTip: Use darwin_options_by_prefix('${name}') to browse available options.`;\r\n    return {\r\n      content: [{ type: \"text\", text: createError(msg, \"NOT_FOUND\") }],\r\n      isError: true,\r\n    };\r\n  } catch (error) {\r\n    console.error(' darwin_info: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function darwin_stats(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(' darwin_stats: getting darwin statistics');\r\n  try {\r\n    const options = await parseHtmlOptions(DARWIN_URL, \"\", \"\", 10000);\r\n\r\n    const categories = new Set<string>();\r\n    for (const opt of options) {\r\n      const parts = opt.name.split(\".\");\r\n      if (parts.length > 0) {\r\n        categories.add(parts[0]);\r\n      }\r\n    }\r\n\r\n    const result = `nix-darwin Statistics:\\n• Total options: ${options.length.toLocaleString()}\\n• Top-level categories: ${categories.size}`;\r\n\r\n    console.log(` darwin_stats: found ${options.length} options in ${categories.size} categories`);\r\n    return {\r\n      content: [{ type: \"text\", text: result }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' darwin_stats: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function darwin_list_options(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(' darwin_list_options: listing all darwin option categories');\r\n  try {\r\n    const options = await parseHtmlOptions(DARWIN_URL, \"\", \"\", 10000);\r\n\r\n    const categories = new Map<string, number>();\r\n    for (const opt of options) {\r\n      const parts = opt.name.split(\".\");\r\n      if (parts.length > 0) {\r\n        const cat = parts[0];\r\n        categories.set(cat, (categories.get(cat) || 0) + 1);\r\n      }\r\n    }\r\n\r\n    const results: string[] = [];\r\n    results.push(`nix-darwin Option Categories (${categories.size} total):\\n`);\r\n\r\n    for (const [cat, count] of Array.from(categories.entries()).sort()) {\r\n      results.push(`• ${cat} (${count} options)`);\r\n    }\r\n\r\n    console.log(` darwin_list_options: found ${categories.size} categories`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\") }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' darwin_list_options: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function darwin_options_by_prefix(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` darwin_options_by_prefix: getting options with prefix=\"${request.prefix}\", limit=${request.limit || 50}`);\r\n  try {\r\n    const { prefix, limit = 50 } = request;\r\n\r\n    const options = await parseHtmlOptions(\r\n      DARWIN_URL,\r\n      \"\",\r\n      prefix,\r\n      limit,\r\n    );\r\n\r\n    if (options.length === 0) {\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: `No nix-darwin options found with prefix '${prefix}'`,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n\r\n    const results: string[] = [];\r\n    results.push(\r\n      `nix-darwin options with prefix '${prefix}' (showing ${options.length}):\\n`,\r\n    );\r\n\r\n    for (const opt of options) {\r\n      results.push(`• ${opt.name}`);\r\n      if (opt.type) {\r\n        results.push(`  Type: ${opt.type}`);\r\n      }\r\n      if (opt.description) {\r\n        results.push(`  ${opt.description}`);\r\n      }\r\n      results.push(\"\");\r\n    }\r\n\r\n    console.log(` darwin_options_by_prefix: found ${results.length} options with prefix \"${prefix}\"`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' darwin_options_by_prefix: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function nixos_flakes_stats(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(' nixos_flakes_stats: getting flakes statistics');\r\n  try {\r\n    const flakeIndex = \"latest-43-group-manual\";\r\n    const auth = btoa(`${NIXOS_AUTH_USER}:${NIXOS_AUTH_PASS}`);\r\n\r\n    const countResp = await fetch(`${NIXOS_API}/${flakeIndex}/_count`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: `Basic ${auth}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ query: { term: { type: \"package\" } } }),\r\n    });\r\n\r\n    const countData = await countResp.json();\r\n    const totalPackages = countData.count || 0;\r\n\r\n    const results: string[] = [];\r\n    results.push(\"NixOS Flakes Statistics:\");\r\n    results.push(`• Available flakes: ${totalPackages.toLocaleString()}`);\r\n    results.push(\r\n      \"\\nNote: Flakes are community-contributed and indexed separately from official packages.\",\r\n    );\r\n\r\n    console.log(` nixos_flakes_stats: found ${totalPackages} flakes`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\") }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' nixos_flakes_stats: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function nixos_flakes_search(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` nixos_flakes_search: searching flakes for query=\"${request.query}\", limit=${request.limit || 20}`);\r\n  try {\r\n    const { query, limit = 20 } = request;\r\n\r\n    if (limit < 1 || limit > 100) {\r\n      console.warn(` nixos_flakes_search: invalid limit ${limit}`);\r\n      return {\r\n        content: [{ type: \"text\", text: createError(\"Limit must be 1-100\") }],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const flakeIndex = \"latest-43-group-manual\";\r\n    const esQueryObj = {\r\n      bool: {\r\n        must: [{ term: { type: \"package\" } }],\r\n        should: [\r\n          { match: { package_pname: { query, boost: 3 } } },\r\n          { match: { package_description: query } },\r\n          { match: { flake_name: { query, boost: 2 } } },\r\n        ],\r\n        minimum_should_match: 1,\r\n      },\r\n    };\r\n\r\n    const hits = await esQuery(flakeIndex, esQueryObj, limit * 2);\r\n\r\n    if (hits.length === 0) {\r\n      console.log(` nixos_flakes_search: no results found for query=\"${query}\"`);\r\n      return {\r\n        content: [\r\n          { type: \"text\", text: `No flakes found matching '${query}'` },\r\n        ],\r\n      };\r\n    }\r\n\r\n    console.log(` nixos_flakes_search: found ${hits.length} results for query=\"${query}\"`);\r\n\r\n    // Deduplicate by flake name\r\n    const seenFlakes = new Set<string>();\r\n    const uniqueHits = [];\r\n\r\n    for (const hit of hits) {\r\n      const src = hit._source || {};\r\n      const flakeName = src.flake_name || \"\";\r\n      if (flakeName && !seenFlakes.has(flakeName)) {\r\n        seenFlakes.add(flakeName);\r\n        uniqueHits.push(hit);\r\n        if (uniqueHits.length >= limit) break;\r\n      }\r\n    }\r\n\r\n    const results: string[] = [];\r\n    results.push(`Found ${uniqueHits.length} flakes matching '${query}':\\n`);\r\n\r\n    for (const hit of uniqueHits) {\r\n      const src = hit._source || {};\r\n      const flakeName = src.flake_name || \"\";\r\n      const desc = src.package_description || \"\";\r\n      const resolved = src.flake_resolved || {};\r\n      const url = resolved.url || \"\";\r\n\r\n      results.push(`• ${flakeName}`);\r\n      if (desc) {\r\n        results.push(`  ${desc}`);\r\n      }\r\n      if (url) {\r\n        results.push(`  URL: ${url}`);\r\n      }\r\n      results.push(\"\");\r\n    }\r\n\r\n    console.log(` nixos_flakes_search: returning ${uniqueHits.length} unique flakes`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' nixos_flakes_search: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function nixhub_package_versions(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` nixhub_package_versions: getting versions for package=\"${request.package_name}\", limit=${request.limit || 10}`);\r\n  try {\r\n    const { package_name, limit = 10 } = request;\r\n\r\n\r\n    if (!package_name || !package_name.trim()) {\r\n      return {\r\n        content: [\r\n          { type: \"text\", text: createError(\"Package name is required\") },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    if (!/^[a-zA-Z0-9\\-_.]+$/.test(package_name)) {\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(\r\n              \"Invalid package name. Only letters, numbers, hyphens, underscores, and dots are allowed\",\r\n            ),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    if (limit < 1 || limit > 50) {\r\n      return {\r\n        content: [\r\n          { type: \"text\", text: createError(\"Limit must be between 1 and 50\") },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const url = `https://www.nixhub.io/packages/${package_name}?_data=routes%2F_nixhub.packages.%24pkg._index`;\r\n\r\n    const response = await fetch(url, {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"User-Agent\": \"jilebi-server\",\r\n      },\r\n    });\r\n\r\n    if (response.status === 404) {\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(\r\n              `Package '${package_name}' not found in NixHub`,\r\n              \"NOT_FOUND\",\r\n            ),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    if (response.status >= 500) {\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(\r\n              \"NixHub service temporarily unavailable\",\r\n              \"SERVICE_ERROR\",\r\n            ),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (typeof data !== \"object\") {\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(\"Invalid response format from NixHub\"),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const summary = data.summary || \"\";\r\n    const releases = data.releases || [];\r\n\r\n    if (releases.length === 0) {\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: `Package: ${package_name}\\nNo version history available in NixHub`,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n\r\n    const results: string[] = [];\r\n    results.push(`Package: ${package_name}`);\r\n    if (summary) {\r\n      results.push(`Description: ${summary}`);\r\n    }\r\n    results.push(`Total versions: ${releases.length}`);\r\n    results.push(\"\");\r\n\r\n    const shownReleases = releases.slice(0, limit);\r\n    results.push(\r\n      `Version history (showing ${shownReleases.length} of ${releases.length}):\\n`,\r\n    );\r\n\r\n    for (const release of shownReleases) {\r\n      const version = release.version || \"\";\r\n      const platforms = release.platforms || [];\r\n\r\n      results.push(`• Version: ${version}`);\r\n\r\n      if (platforms.length > 0) {\r\n        for (const platform of platforms) {\r\n          const arch = platform.system || \"\";\r\n          const commit = platform.commit_hash || \"\";\r\n          const attrPath = platform.attr_path || \"\";\r\n\r\n          if (arch) {\r\n            results.push(`  Platform: ${arch}`);\r\n          }\r\n          if (commit) {\r\n            results.push(`  Commit: ${commit}`);\r\n          }\r\n          if (attrPath) {\r\n            results.push(`  Attribute: ${attrPath}`);\r\n          }\r\n        }\r\n      }\r\n      results.push(\"\");\r\n    }\r\n\r\n    if (shownReleases.some((r: any) => r.platforms?.[0]?.commit_hash)) {\r\n      results.push(\"To use a specific version in your Nix configuration:\");\r\n      results.push(\"1. Pin nixpkgs to the commit hash\");\r\n      results.push(\"2. Use the attribute path to install the package\");\r\n    }\r\n\r\n    console.log(` nixhub_package_versions: returning ${results.length} version entries`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' nixhub_package_versions: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function nixhub_find_version(\r\n  request: any,\r\n  env: Environment,\r\n): Promise<JilebiToolResponse> {\r\n  console.log(` nixhub_find_version: finding package=\"${request.package_name}\", version=\"${request.version}\"`);\r\n  try {\r\n    const { package_name, version } = request;\r\n\r\n\r\n    if (!package_name || !package_name.trim()) {\r\n      return {\r\n        content: [\r\n          { type: \"text\", text: createError(\"Package name is required\") },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    if (!version || !version.trim()) {\r\n      return {\r\n        content: [{ type: \"text\", text: createError(\"Version is required\") }],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    if (!/^[a-zA-Z0-9\\-_.]+$/.test(package_name)) {\r\n      return {\r\n        content: [\r\n          {\r\n            type: \"text\",\r\n            text: createError(\r\n              \"Invalid package name. Only letters, numbers, hyphens, underscores, and dots are allowed\",\r\n            ),\r\n          },\r\n        ],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const limitsToTry = [10, 25, 50];\r\n    let foundVersion: any = null;\r\n    const allVersions: Array<{ version: string; release: any }> = [];\r\n\r\n    for (const limit of limitsToTry) {\r\n      const url = `https://www.nixhub.io/packages/${package_name}?_data=routes%2F_nixhub.packages.%24pkg._index`;\r\n\r\n      const response = await fetch(url, {\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"User-Agent\": \"jilebi-server\",\r\n        },\r\n      });\r\n\r\n      if (response.status === 404) {\r\n        return {\r\n          content: [\r\n            {\r\n              type: \"text\",\r\n              text: createError(\r\n                `Package '${package_name}' not found in NixHub`,\r\n                \"NOT_FOUND\",\r\n              ),\r\n            },\r\n          ],\r\n          isError: true,\r\n        };\r\n      }\r\n\r\n      if (response.status >= 500) {\r\n        return {\r\n          content: [\r\n            {\r\n              type: \"text\",\r\n              text: createError(\r\n                \"NixHub service temporarily unavailable\",\r\n                \"SERVICE_ERROR\",\r\n              ),\r\n            },\r\n          ],\r\n          isError: true,\r\n        };\r\n      }\r\n\r\n      const data = await response.json();\r\n      const releases = data.releases || [];\r\n\r\n      for (const release of releases.slice(0, limit)) {\r\n        const releaseVersion = release.version || \"\";\r\n\r\n        if (\r\n          releaseVersion &&\r\n          !allVersions.find((v) => v.version === releaseVersion)\r\n        ) {\r\n          allVersions.push({ version: releaseVersion, release });\r\n        }\r\n\r\n        if (releaseVersion === version) {\r\n          foundVersion = release;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (foundVersion) break;\r\n    }\r\n\r\n    if (foundVersion) {\r\n      const results: string[] = [];\r\n      results.push(`✓ Found ${package_name} version ${version}\\n`);\r\n\r\n      const platforms = foundVersion.platforms || [];\r\n      if (platforms.length > 0) {\r\n        for (const platform of platforms) {\r\n          const arch = platform.system || \"\";\r\n          const commit = platform.commit_hash || \"\";\r\n          const attrPath = platform.attr_path || \"\";\r\n\r\n          if (arch) {\r\n            results.push(`Platform: ${arch}`);\r\n          }\r\n          if (commit) {\r\n            results.push(`Commit: ${commit}`);\r\n          }\r\n          if (attrPath) {\r\n            results.push(`Attribute: ${attrPath}`);\r\n          }\r\n          results.push(\"\");\r\n        }\r\n      }\r\n\r\n      results.push(\"Usage:\");\r\n      results.push(\"1. Pin nixpkgs to the commit hash above\");\r\n      results.push(\"2. Install using the attribute path\");\r\n\r\n      return {\r\n        content: [{ type: \"text\", text: results.join(\"\\n\").trim() }],\r\n      };\r\n    }\r\n\r\n    const results: string[] = [];\r\n    results.push(`✗ ${package_name} version ${version} not found in NixHub\\n`);\r\n\r\n    if (allVersions.length > 0) {\r\n      results.push(`Available versions (checked ${allVersions.length} total):`);\r\n\r\n      const sortedVersions = allVersions.sort((a, b) =>\r\n        compareVersions(a.version, b.version),\r\n      );\r\n      const newest = sortedVersions[0].version;\r\n      const oldest = sortedVersions[sortedVersions.length - 1].version;\r\n\r\n      results.push(`• Newest: ${newest}`);\r\n      results.push(`• Oldest: ${oldest}`);\r\n\r\n      const majorVersions = new Set<string>();\r\n      for (const v of allVersions) {\r\n        const parts = v.version.split(\".\");\r\n        if (parts.length > 0) {\r\n          majorVersions.add(parts[0]);\r\n        }\r\n      }\r\n\r\n      if (majorVersions.size > 0) {\r\n        results.push(\r\n          `• Major versions available: ${Array.from(majorVersions)\r\n            .sort((a, b) => parseInt(b) - parseInt(a))\r\n            .join(\", \")}`,\r\n        );\r\n      }\r\n\r\n      results.push(\"\\nAlternatives:\");\r\n      results.push(\"• Use a newer version if possible\");\r\n      results.push(\"• Build from source with a custom derivation\");\r\n      results.push(\"• Use Docker/containers with the specific version\");\r\n      results.push(\r\n        \"• Find an old nixpkgs commit from before the version was removed\",\r\n      );\r\n    }\r\n\r\n    console.log(` nixhub_find_version: completed search for ${package_name}@${version}`);\r\n    return {\r\n      content: [{ type: \"text\", text: results.join(\"\\n\") }],\r\n    };\r\n  } catch (error) {\r\n    console.error(' nixhub_find_version: error occurred:', error);\r\n    return {\r\n      content: [\r\n        {\r\n          type: \"text\",\r\n          text: createError(\r\n            error instanceof Error ? error.message : String(error),\r\n          ),\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;AAKG;AAkBH;AACA,MAAM,SAAS,GAAG,kCAAkC;AACpD,MAAM,eAAe,GAAG,YAAY;AACpC,MAAM,eAAe,GAAG,0BAA0B;AAElD;AACA,MAAM,aAAa,GAA2B;AAC5C,IAAA,QAAQ,EAAE,gBAAgB;AAC1B,IAAA,OAAO,EAAE,aAAa;AACtB,IAAA,OAAO,EAAE,aAAa;CACvB;AAED;AACA,MAAM,iBAAiB,GAA2B;AAChD,IAAA,QAAQ,EAAE,0BAA0B;AACpC,IAAA,MAAM,EAAE,uBAAuB;AAC/B,IAAA,OAAO,EAAE,uBAAuB;AAChC,IAAA,OAAO,EAAE,uBAAuB;AAChC,IAAA,IAAI,EAAE,uBAAuB;CAC9B;AAED,MAAM,gBAAgB,GACpB,4DAA4D;AAC9D,MAAM,UAAU,GAAG,2DAA2D;AAE9E;AACA,MAAM,YAAY,CAAA;IACR,iBAAiB,GAAkC,IAAI;IACvD,gBAAgB,GAAkC,IAAI;IACtD,aAAa,GAAY,KAAK;AAEtC,IAAA,MAAM,YAAY,GAAA;AAChB,QAAA,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC;AAC5C,QAAA,IAAI,IAAI,CAAC,iBAAiB,KAAK,IAAI,EAAE;AACnC,YAAA,OAAO,CAAC,GAAG,CAAC,iDAAiD,CAAC;YAC9D,IAAI,CAAC,iBAAiB,GAAG,MAAM,IAAI,CAAC,yBAAyB,EAAE;QACjE;aAAO;AACL,YAAA,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC;QACzC;AACA,QAAA,OAAO,IAAI,CAAC,iBAAiB,IAAI,EAAE;IACrC;AAEA,IAAA,MAAM,WAAW,GAAA;AACf,QAAA,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC;AAC3C,QAAA,IAAI,IAAI,CAAC,gBAAgB,KAAK,IAAI,EAAE;AAClC,YAAA,OAAO,CAAC,GAAG,CAAC,8CAA8C,CAAC;YAC3D,IAAI,CAAC,gBAAgB,GAAG,MAAM,IAAI,CAAC,eAAe,EAAE;QACtD;aAAO;AACL,YAAA,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC;QACxC;AACA,QAAA,OAAO,IAAI,CAAC,gBAAgB,IAAI,EAAE;IACpC;IAEA,eAAe,GAAA;QACb,OAAO,IAAI,CAAC,aAAa;IAC3B;AAEQ,IAAA,MAAM,yBAAyB,GAAA;AAErC,QAAA,OAAO,CAAC,GAAG,CAAC,wDAAwD,CAAC;QACrE,MAAM,WAAW,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AACpC,QAAA,MAAM,QAAQ,GAAG,CAAC,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACjE,MAAM,SAAS,GAA2B,EAAE;AAE5C,QAAA,KAAK,MAAM,GAAG,IAAI,WAAW,EAAE;AAC7B,YAAA,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;AAC9B,gBAAA,MAAM,OAAO,GAAG,CAAA,OAAA,EAAU,GAAG,CAAA,OAAA,EAAU,OAAO,EAAE;AAChD,gBAAA,IAAI;AACF,oBAAA,MAAM,GAAG,GAAG,CAAA,EAAG,SAAS,CAAA,CAAA,EAAI,OAAO,SAAS;oBAC5C,MAAM,IAAI,GAAG,IAAI,CAAC,CAAA,EAAG,eAAe,CAAA,CAAA,EAAI,eAAe,CAAA,CAAE,CAAC;AAC1D,oBAAA,OAAO,CAAC,GAAG,CAAC,gDAAgD,OAAO,CAAA,CAAE,CAAC;AAEtE,oBAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE;AAChC,wBAAA,MAAM,EAAE,MAAM;AACd,wBAAA,OAAO,EAAE;4BACP,aAAa,EAAE,CAAA,MAAA,EAAS,IAAI,CAAA,CAAE;AAC9B,4BAAA,cAAc,EAAE,kBAAkB;AACnC,yBAAA;AACD,wBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC;AACnD,qBAAA,CAAC;AAEF,oBAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,GAAG,EAAE;AAC3B,wBAAA,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AAClC,wBAAA,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC;AAC7B,wBAAA,IAAI,KAAK,GAAG,CAAC,EAAE;4BACb,OAAO,CAAC,GAAG,CAAC,CAAA,kCAAA,EAAqC,OAAO,CAAA,MAAA,EAAS,KAAK,CAAA,UAAA,CAAY,CAAC;4BACnF,SAAS,CAAC,OAAO,CAAC,GAAG,CAAA,EAAG,KAAK,CAAC,cAAc,EAAE,CAAA,UAAA,CAAY;wBAC5D;oBACF;gBACF;gBAAE,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,GAAG,CAAC,CAAA,oCAAA,EAAuC,OAAO,CAAA,eAAA,EAAkB,KAAK,CAAA,CAAE,CAAC;oBACpF;gBACF;YACF;QACF;AAEA,QAAA,OAAO,CAAC,GAAG,CAAC,CAAA,sDAAA,EAAyD,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAA,SAAA,CAAW,CAAC;AAC9G,QAAA,OAAO,SAAS;IAClB;AAEQ,IAAA,MAAM,eAAe,GAAA;AAC3B,QAAA,OAAO,CAAC,GAAG,CAAC,+CAA+C,CAAC;AAC5D,QAAA,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,YAAY,EAAE;QAC3C,MAAM,QAAQ,GAA2B,EAAE;QAE3C,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;AACvC,YAAA,OAAO,CAAC,IAAI,CAAC,0DAA0D,CAAC;AACxE,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI;AACzB,YAAA,OAAO,iBAAiB;QAC1B;;AAGA,QAAA,KAAK,MAAM,CAAC,IAAI,EAAE,WAAW,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE;YAC/D,IAAI,KAAK,GAAG,KAAK;AACjB,YAAA,KAAK,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;AACpD,gBAAA,IAAI,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;oBACjC,OAAO,CAAC,GAAG,CAAC,CAAA,yBAAA,EAA4B,IAAI,CAAA,IAAA,EAAO,OAAO,CAAA,CAAE,CAAC;AAC7D,oBAAA,QAAQ,CAAC,IAAI,CAAC,GAAG,OAAO;oBACxB,KAAK,GAAG,IAAI;oBACZ;gBACF;YACF;YACA,IAAI,CAAC,KAAK,IAAI,iBAAiB,CAAC,IAAI,CAAC,EAAE;AACrC,gBAAA,OAAO,CAAC,GAAG,CAAC,CAAA,qCAAA,EAAwC,IAAI,CAAA,IAAA,EAAO,iBAAiB,CAAC,IAAI,CAAC,CAAA,CAAE,CAAC;gBACzF,QAAQ,CAAC,IAAI,CAAC,GAAG,iBAAiB,CAAC,IAAI,CAAC;YAC1C;QACF;;AAGA,QAAA,MAAM,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS;AACzC,aAAA,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,4BAA4B,CAAC;AACnD,aAAA,IAAI;AACJ,aAAA,OAAO,EAAE;AAEZ,QAAA,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,OAAO,CAAC,GAAG,CAAC,CAAA,mCAAA,EAAsC,cAAc,CAAC,CAAC,CAAC,CAAA,CAAE,CAAC;YACtE,QAAQ,CAAC,QAAQ,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC;QACxC;AAAO,aAAA,IAAI,iBAAiB,CAAC,QAAQ,CAAC,EAAE;AACtC,YAAA,OAAO,CAAC,GAAG,CAAC,CAAA,2CAAA,CAA6C,CAAC;YAC1D,QAAQ,CAAC,QAAQ,CAAC,GAAG,iBAAiB,CAAC,QAAQ,CAAC;QAClD;AAEA,QAAA,OAAO,CAAC,GAAG,CAAC,CAAA,uCAAA,EAA0C,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAA,kBAAA,CAAoB,CAAC;AACvG,QAAA,OAAO,QAAQ;IACjB;AACD;AAED;AACA,MAAM,YAAY,GAAG,IAAI,YAAY,EAAE;AAEvC;AACA,SAAS,WAAW,CAAC,OAAe,EAAE,SAAkB,EAAA;AACtD,IAAA,OAAO,SAAS,GAAG,UAAU,SAAS,CAAA,GAAA,EAAM,OAAO,CAAA,CAAE,GAAG,CAAA,OAAA,EAAU,OAAO,EAAE;AAC7E;AAEA,eAAe,WAAW,GAAA;AACxB,IAAA,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC;AACvD,IAAA,OAAO,MAAM,YAAY,CAAC,WAAW,EAAE;AACzC;AAEA,SAAS,qBAAqB,CAC5B,OAAe,EACf,QAAgC,EAAA;AAEhC,IAAA,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;IAClD,OAAO,CAAA,oBAAA,EAAuB,SAAS,CAAA,CAAE;AAC3C;AAEA,eAAe,OAAO,CACpB,KAAa,EACb,KAAU,EACV,OAAe,EAAE,EAAA;IAEjB,OAAO,CAAC,GAAG,CAAC,CAAA,0BAAA,EAA6B,KAAK,CAAA,YAAA,EAAe,IAAI,CAAA,CAAE,CAAC;AACpE,IAAA,IAAI;AACF,QAAA,MAAM,GAAG,GAAG,CAAA,EAAG,SAAS,CAAA,CAAA,EAAI,KAAK,UAAU;QAC3C,MAAM,IAAI,GAAG,IAAI,CAAC,CAAA,EAAG,eAAe,CAAA,CAAA,EAAI,eAAe,CAAA,CAAE,CAAC;AAC1D,QAAA,OAAO,CAAC,GAAG,CAAC,iBAAiB,GAAG,CAAA,CAAE,CAAC;AAEnC,QAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE;AAChC,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,OAAO,EAAE;gBACP,aAAa,EAAE,CAAA,MAAA,EAAS,IAAI,CAAA,CAAE;AAC9B,gBAAA,cAAc,EAAE,kBAAkB;AACnC,aAAA;YACD,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;AACtC,SAAA,CAAC;AAEF,QAAA,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AAElC,QAAA,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;AACvC,YAAA,OAAO,CAAC,GAAG,CAAC,CAAA,oBAAA,EAAuB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAA,iBAAA,EAAoB,KAAK,CAAA,CAAE,CAAC;AACpF,YAAA,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI;QACvB;AACA,QAAA,OAAO,CAAC,IAAI,CAAC,kDAAkD,KAAK,CAAA,CAAE,CAAC;AACvE,QAAA,OAAO,EAAE;IACX;IAAE,OAAO,KAAK,EAAE;QACd,OAAO,CAAC,KAAK,CAAC,CAAA,8BAAA,EAAiC,KAAK,CAAA,CAAA,CAAG,EAAE,KAAK,CAAC;QAC/D,MAAM,IAAI,KAAK,CACb,CAAA,WAAA,EAAc,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA,CAAE,CACvE;IACH;AACF;AAEA,eAAe,gBAAgB,CAC7B,GAAW,EACX,KAAA,GAAgB,EAAE,EAClB,MAAA,GAAiB,EAAE,EACnB,KAAA,GAAgB,GAAG,EAAA;AAEnB,IAAA,OAAO,CAAC,GAAG,CAAC,CAAA,iCAAA,EAAoC,GAAG,CAAA,SAAA,EAAY,KAAK,CAAA,WAAA,EAAc,MAAM,CAAA,SAAA,EAAY,KAAK,CAAA,CAAE,CAAC;AAC5G,IAAA,IAAI;AACF,QAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC;AACjC,QAAA,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;;AAGlC,QAAA,MAAM,QAAQ,GAAG,aAAa,CAAC,IAAI,CAAC;;;QAIpC,MAAM,OAAO,GACX,EAAE;;QAGJ,MAAM,aAAa,GAAG,mBAAmB;AACzC,QAAA,IAAI,KAAK;QAET,OACE,CAAC,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI;AAC3C,YAAA,OAAO,CAAC,MAAM,GAAG,KAAK,EACtB;AACA,YAAA,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;;YAGnB,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ,CAAC;;AAGxC,YAAA,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,EAAE;gBAC9D;YACF;AACA,YAAA,IAAI,MAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,IAAI,KAAK,MAAM,EAAE;gBAC/D;YACF;;AAGA,YAAA,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAC1B,IAAI,MAAM,CAAC,WAAW,KAAK,CAAC,CAAC,CAAC,CAAA,6BAAA,CAA+B,EAAE,GAAG,CAAC,CACpE;YACD,IAAI,WAAW,GAAG,EAAE;YACpB,IAAI,IAAI,GAAG,EAAE;YAEb,IAAI,SAAS,EAAE;AACb,gBAAA,MAAM,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC;;AAE9B,gBAAA,WAAW,GAAG;AACX,qBAAA,OAAO,CAAC,UAAU,EAAE,GAAG;AACvB,qBAAA,IAAI;AACJ,qBAAA,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC;;gBAGpB,MAAM,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,mBAAmB,CAAC;gBACtD,IAAI,SAAS,EAAE;oBACb,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;gBAC5B;YACF;YAEA,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;QAC3C;AAEA,QAAA,OAAO,OAAO;IAChB;IAAE,OAAO,KAAK,EAAE;QACd,MAAM,IAAI,KAAK,CACb,CAAA,sBAAA,EAAyB,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA,CAAE,CAClF;IACH;AACF;AAEA,SAAS,aAAa,CAAC,IAAY,EAAA;AACjC,IAAA,IAAI,CAAC,IAAI;AAAE,QAAA,OAAO,EAAE;IACpB,IAAI,MAAM,GAAG;AACV,SAAA,OAAO,CAAC,kBAAkB,EAAE,EAAE;AAC9B,SAAA,OAAO,CAAC,oBAAoB,EAAE,EAAE,CAAC;IACpC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;AACvC,IAAA,OAAO,MAAM,CAAC,IAAI,EAAE;AACtB;AAEA,SAAS,UAAU,CAAC,OAAe,EAAA;AACjC,IAAA,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAI;QAC5C,MAAM,GAAG,GAAG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC;AAC3B,QAAA,OAAO,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG;AAC7B,IAAA,CAAC,CAAC;AACF,IAAA,OAAO,KAAK;AACd;AAEA,SAAS,eAAe,CAAC,CAAS,EAAE,CAAS,EAAA;AAC3C,IAAA,MAAM,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC;AAC1B,IAAA,MAAM,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC;IAE1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,EAAE;QAC3D,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;QAC1B,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;AAC1B,QAAA,IAAI,KAAK,KAAK,KAAK,EAAE;YACnB,OAAO,KAAK,GAAG,KAAK;QACtB;IACF;AACA,IAAA,OAAO,CAAC;AACV;AAEA;AAEO,eAAe,YAAY,CAChC,OAAY,EACZ,GAAgB,EAAA;IAEhB,OAAO,CAAC,GAAG,CAAC,CAAA,wCAAA,EAA2C,OAAO,CAAC,KAAK,CAAA,QAAA,EAAW,OAAO,CAAC,WAAW,IAAI,UAAU,CAAA,UAAA,EAAa,OAAO,CAAC,OAAO,IAAI,UAAU,CAAA,QAAA,EAAW,OAAO,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,CAAC;AAC3L,IAAA,IAAI;AACF,QAAA,MAAM,EACJ,KAAK,EACL,WAAW,GAAG,UAAU,EACxB,KAAK,GAAG,EAAE,EACV,OAAO,GAAG,UAAU,GACrB,GAAG,OAAO;AAEX,QAAA,IAAI,CAAC,CAAC,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;AACxE,YAAA,OAAO,CAAC,IAAI,CAAC,uCAAuC,WAAW,CAAA,CAAA,CAAG,CAAC;YACnE,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,CAAA,cAAA,EAAiB,WAAW,CAAA,CAAA,CAAG,CAAC,EAAE;AACrE,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,QAAQ,GAAG,MAAM,WAAW,EAAE;AACpC,QAAA,IAAI,EAAE,OAAO,IAAI,QAAQ,CAAC,EAAE;AAC1B,YAAA,OAAO,CAAC,IAAI,CAAC,mCAAmC,OAAO,CAAA,CAAA,CAAG,CAAC;YAC3D,MAAM,WAAW,GAAG,qBAAqB,CAAC,OAAO,EAAE,QAAQ,CAAC;YAC5D,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,WAAW,CAAC,CAAA,iBAAA,EAAoB,OAAO,CAAA,GAAA,EAAM,WAAW,EAAE,CAAC;AAClE,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AACA,QAAA,OAAO,CAAC,GAAG,CAAC,CAAA,8BAAA,EAAiC,OAAO,CAAA,MAAA,EAAS,QAAQ,CAAC,OAAO,CAAC,CAAA,CAAA,CAAG,CAAC;QAElF,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,GAAG,EAAE;AAC5B,YAAA,OAAO,CAAC,IAAI,CAAC,gCAAgC,KAAK,CAAA,CAAE,CAAC;YACrD,OAAO;AACL,gBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,qBAAqB,CAAC,EAAE,CAAC;AACrE,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,IAAI,WAAW,KAAK,QAAQ,EAAE;AAC5B,YAAA,OAAO,CAAC,GAAG,CAAC,CAAA,gDAAA,CAAkD,CAAC;AAC/D,YAAA,OAAO,MAAM,mBAAmB,CAAC,OAAO,EAAE,GAAG,CAAC;QAChD;AAEA,QAAA,IAAI,UAAe;AAEnB,QAAA,IAAI,WAAW,KAAK,UAAU,EAAE;AAC9B,YAAA,UAAU,GAAG;AACX,gBAAA,IAAI,EAAE;oBACJ,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,CAAC;AACrC,oBAAA,MAAM,EAAE;AACN,wBAAA,EAAE,KAAK,EAAE,EAAE,aAAa,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,EAAE;AACjD,wBAAA,EAAE,KAAK,EAAE,EAAE,mBAAmB,EAAE,KAAK,EAAE,EAAE;AAC1C,qBAAA;AACD,oBAAA,oBAAoB,EAAE,CAAC;AACxB,iBAAA;aACF;QACH;AAAO,aAAA,IAAI,WAAW,KAAK,SAAS,EAAE;AACpC,YAAA,UAAU,GAAG;AACX,gBAAA,IAAI,EAAE;oBACJ,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EAAE,CAAC;AACpC,oBAAA,MAAM,EAAE;wBACN,EAAE,QAAQ,EAAE,EAAE,WAAW,EAAE,CAAA,CAAA,EAAI,KAAK,CAAA,CAAA,CAAG,EAAE,EAAE;AAC3C,wBAAA,EAAE,KAAK,EAAE,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAAE;AACzC,qBAAA;AACD,oBAAA,oBAAoB,EAAE,CAAC;AACxB,iBAAA;aACF;QACH;aAAO;AACL,YAAA,UAAU,GAAG;AACX,gBAAA,IAAI,EAAE;oBACJ,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,CAAC;AACrC,oBAAA,MAAM,EAAE;AACN,wBAAA,EAAE,KAAK,EAAE,EAAE,gBAAgB,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,EAAE;AACpD,wBAAA,EAAE,KAAK,EAAE,EAAE,aAAa,EAAE,KAAK,EAAE,EAAE;AACpC,qBAAA;AACD,oBAAA,oBAAoB,EAAE,CAAC;AACxB,iBAAA;aACF;QACH;AAEA,QAAA,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,UAAU,EAAE,KAAK,CAAC;AAEhE,QAAA,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;YACrB,OAAO,CAAC,GAAG,CAAC,CAAA,2CAAA,EAA8C,KAAK,CAAA,KAAA,EAAQ,WAAW,CAAA,CAAE,CAAC;YACrF,OAAO;AACL,gBAAA,OAAO,EAAE;oBACP,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAA,GAAA,EAAM,WAAW,CAAA,iBAAA,EAAoB,KAAK,CAAA,CAAA,CAAG,EAAE;AACtE,iBAAA;aACF;QACH;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,qBAAA,EAAwB,IAAI,CAAC,MAAM,CAAA,oBAAA,EAAuB,KAAK,CAAA,CAAA,CAAG,CAAC;QAC/E,MAAM,OAAO,GAAa,EAAE;AAC5B,QAAA,OAAO,CAAC,IAAI,CAAC,CAAA,MAAA,EAAS,IAAI,CAAC,MAAM,CAAA,CAAA,EAAI,WAAW,CAAA,WAAA,EAAc,KAAK,CAAA,IAAA,CAAM,CAAC;AAE1E,QAAA,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;AACtB,YAAA,MAAM,GAAG,GAAG,GAAG,CAAC,OAAO,IAAI,EAAE;AAE7B,YAAA,IAAI,WAAW,KAAK,UAAU,EAAE;AAC9B,gBAAA,MAAM,IAAI,GAAG,GAAG,CAAC,aAAa,IAAI,EAAE;AACpC,gBAAA,MAAM,OAAO,GAAG,GAAG,CAAC,gBAAgB,IAAI,EAAE;AAC1C,gBAAA,MAAM,IAAI,GAAG,GAAG,CAAC,mBAAmB,IAAI,EAAE;gBAC1C,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,IAAI,CAAA,EAAA,EAAK,OAAO,CAAA,CAAA,CAAG,CAAC;gBACtC,IAAI,IAAI,EAAE;AACR,oBAAA,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,CAAA,CAAE,CAAC;gBAC3B;AACA,gBAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;YAClB;AAAO,iBAAA,IAAI,WAAW,KAAK,SAAS,EAAE;AACpC,gBAAA,MAAM,IAAI,GAAG,GAAG,CAAC,WAAW,IAAI,EAAE;AAClC,gBAAA,MAAM,OAAO,GAAG,GAAG,CAAC,WAAW,IAAI,EAAE;AACrC,gBAAA,IAAI,IAAI,GAAG,GAAG,CAAC,kBAAkB,IAAI,EAAE;AACvC,gBAAA,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC;AAC1B,gBAAA,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,CAAA,CAAE,CAAC;gBACzB,IAAI,OAAO,EAAE;AACX,oBAAA,OAAO,CAAC,IAAI,CAAC,WAAW,OAAO,CAAA,CAAE,CAAC;gBACpC;gBACA,IAAI,IAAI,EAAE;AACR,oBAAA,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,CAAA,CAAE,CAAC;gBAC3B;AACA,gBAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;YAClB;iBAAO;AACL,gBAAA,MAAM,QAAQ,GAAG,GAAG,CAAC,gBAAgB,IAAI,EAAE;AAC3C,gBAAA,MAAM,OAAO,GAAG,GAAG,CAAC,aAAa,IAAI,EAAE;AACvC,gBAAA,MAAM,UAAU,GAAG,KAAK,CAAC,WAAW,EAAE;AACtC,gBAAA,MAAM,eAAe,GAAG,QAAQ,CAAC,MAAM,CACrC,CAAC,CAAS,KAAK,CAAC,CAAC,WAAW,EAAE,KAAK,UAAU,CAC9C;AAED,gBAAA,KAAK,MAAM,IAAI,IAAI,eAAe,EAAE;oBAClC,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,IAAI,CAAA,cAAA,EAAiB,OAAO,CAAA,CAAA,CAAG,CAAC;AAClD,oBAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;gBAClB;YACF;QACF;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,yBAAA,EAA4B,OAAO,CAAC,MAAM,CAAA,kBAAA,CAAoB,CAAC;QAC3E,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;SAC7D;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,CAAC;QACtD,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,UAAU,CAC9B,OAAY,EACZ,GAAgB,EAAA;IAEhB,OAAO,CAAC,GAAG,CAAC,CAAA,oCAAA,EAAuC,OAAO,CAAC,IAAI,WAAW,OAAO,CAAC,IAAI,IAAI,SAAS,aAAa,OAAO,CAAC,OAAO,IAAI,UAAU,CAAA,CAAE,CAAC;AAChJ,IAAA,IAAI;AACF,QAAA,MAAM,EAAE,IAAI,EAAE,IAAI,GAAG,SAAS,EAAE,OAAO,GAAG,UAAU,EAAE,GAAG,OAAO;AAEhE,QAAA,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AACzC,YAAA,OAAO,CAAC,IAAI,CAAC,8BAA8B,IAAI,CAAA,CAAA,CAAG,CAAC;YACnD,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;AACZ,wBAAA,IAAI,EAAE,WAAW,CAAC,oCAAoC,CAAC;AACxD,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,QAAQ,GAAG,MAAM,WAAW,EAAE;AACpC,QAAA,IAAI,EAAE,OAAO,IAAI,QAAQ,CAAC,EAAE;AAC1B,YAAA,OAAO,CAAC,IAAI,CAAC,iCAAiC,OAAO,CAAA,CAAA,CAAG,CAAC;YACzD,MAAM,WAAW,GAAG,qBAAqB,CAAC,OAAO,EAAE,QAAQ,CAAC;YAC5D,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,WAAW,CAAC,CAAA,iBAAA,EAAoB,OAAO,CAAA,GAAA,EAAM,WAAW,EAAE,CAAC;AAClE,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,KAAK,GAAG,IAAI,KAAK,SAAS,GAAG,eAAe,GAAG,aAAa;AAClE,QAAA,MAAM,KAAK,GAAG;AACZ,YAAA,IAAI,EAAE;gBACJ,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,KAAK,GAAG,IAAI,EAAE,EAAE,CAAC;AACxD,aAAA;SACF;AAED,QAAA,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;AAEvD,QAAA,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;YACrB,OAAO,CAAC,GAAG,CAAC,CAAA,aAAA,EAAgB,IAAI,CAAA,EAAA,EAAK,IAAI,CAAA,WAAA,CAAa,CAAC;YACvD,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,WAAW,CACf,CAAA,EAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA,EAAA,EAAK,IAAI,CAAA,WAAA,CAAa,EACrE,WAAW,CACZ;AACF,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;QAEA,MAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,EAAE;QACjC,MAAM,IAAI,GAAa,EAAE;AAEzB,QAAA,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,IAAI,CAAC,IAAI,CAAC,CAAA,SAAA,EAAY,GAAG,CAAC,aAAa,IAAI,EAAE,CAAA,CAAE,CAAC;YAChD,IAAI,CAAC,IAAI,CAAC,CAAA,SAAA,EAAY,GAAG,CAAC,gBAAgB,IAAI,EAAE,CAAA,CAAE,CAAC;AAEnD,YAAA,MAAM,IAAI,GAAG,GAAG,CAAC,mBAAmB,IAAI,EAAE;YAC1C,IAAI,IAAI,EAAE;AACR,gBAAA,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAA,CAAE,CAAC;YACnC;AAEA,YAAA,IAAI,QAAQ,GAAG,GAAG,CAAC,gBAAgB,IAAI,EAAE;AACzC,YAAA,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AACvB,gBAAA,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC3B,oBAAA,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,EAAE;gBAC9B;AACA,gBAAA,IAAI,CAAC,IAAI,CAAC,aAAa,QAAQ,CAAA,CAAE,CAAC;YACpC;AAEA,YAAA,MAAM,QAAQ,GAAG,GAAG,CAAC,mBAAmB,IAAI,EAAE;AAC9C,YAAA,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AACvB,gBAAA,IAAI,CAAC,IAAI,CAAC,CAAA,SAAA,EAAY,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,CAAE,CAAC;YAC9C;QACF;aAAO;YACL,IAAI,CAAC,IAAI,CAAC,CAAA,QAAA,EAAW,GAAG,CAAC,WAAW,IAAI,EAAE,CAAA,CAAE,CAAC;AAE7C,YAAA,MAAM,OAAO,GAAG,GAAG,CAAC,WAAW,IAAI,EAAE;YACrC,IAAI,OAAO,EAAE;AACX,gBAAA,IAAI,CAAC,IAAI,CAAC,SAAS,OAAO,CAAA,CAAE,CAAC;YAC/B;AAEA,YAAA,IAAI,IAAI,GAAG,GAAG,CAAC,kBAAkB,IAAI,EAAE;AACvC,YAAA,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC;YAC1B,IAAI,IAAI,EAAE;AACR,gBAAA,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAA,CAAE,CAAC;YACnC;AAEA,YAAA,MAAM,UAAU,GAAG,GAAG,CAAC,cAAc,IAAI,EAAE;YAC3C,IAAI,UAAU,EAAE;AACd,gBAAA,IAAI,CAAC,IAAI,CAAC,YAAY,UAAU,CAAA,CAAE,CAAC;YACrC;AAEA,YAAA,MAAM,OAAO,GAAG,GAAG,CAAC,cAAc,IAAI,EAAE;YACxC,IAAI,OAAO,EAAE;AACX,gBAAA,IAAI,CAAC,IAAI,CAAC,YAAY,OAAO,CAAA,CAAE,CAAC;YAClC;QACF;QAEA,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;SACnD;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,KAAK,CAAC;QACpD,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,cAAc,CAClC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,6CAA6C,CAAC;AAC1D,IAAA,IAAI;AACF,QAAA,MAAM,UAAU,GAAG,MAAM,WAAW,EAAE;AACtC,QAAA,MAAM,SAAS,GAAG,MAAM,YAAY,CAAC,YAAY,EAAE;QAEnD,MAAM,OAAO,GAAa,EAAE;AAE5B,QAAA,IAAI,YAAY,CAAC,eAAe,EAAE,EAAE;AAClC,YAAA,OAAO,CAAC,IAAI,CAAC,yDAAyD,CAAC;AACvE,YAAA,OAAO,CAAC,IAAI,CAAC,oDAAoD,CAAC;AAClE,YAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;AAChB,YAAA,OAAO,CAAC,IAAI,CAAC,mCAAmC,CAAC;QACnD;aAAO;AACL,YAAA,OAAO,CAAC,IAAI,CAAC,qCAAqC,CAAC;QACrD;AAEA,QAAA,KAAK,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,IAAI,EAAE,EAAE;AAC7D,YAAA,MAAM,MAAM,GAAG,KAAK,IAAI,SAAS,GAAG,aAAa,GAAG,eAAe;YACnE,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,SAAS;AAE9C,YAAA,IAAI,KAAK,GAAG,CAAA,EAAA,EAAK,IAAI,EAAE;AACvB,YAAA,IAAI,IAAI,KAAK,QAAQ,EAAE;gBACrB,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;AAC9B,gBAAA,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;AACrB,oBAAA,MAAM,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;AACxB,oBAAA,KAAK,GAAG,CAAA,EAAA,EAAK,IAAI,CAAA,WAAA,EAAc,OAAO,GAAG;gBAC3C;YACF;YAEA,OAAO,CAAC,IAAI,CAAC,CAAA,EAAG,KAAK,CAAA,GAAA,EAAM,KAAK,CAAA,CAAE,CAAC;AACnC,YAAA,IAAI,KAAK,IAAI,SAAS,EAAE;gBACtB,OAAO,CAAC,IAAI,CAAC,CAAA,UAAA,EAAa,MAAM,CAAA,EAAA,EAAK,QAAQ,CAAA,CAAA,CAAG,CAAC;YACnD;iBAAO;AACL,gBAAA,IAAI,YAAY,CAAC,eAAe,EAAE,EAAE;AAClC,oBAAA,OAAO,CAAC,IAAI,CAAC,yCAAyC,CAAC;gBACzD;qBAAO;AACL,oBAAA,OAAO,CAAC,IAAI,CAAC,aAAa,MAAM,CAAA,CAAE,CAAC;gBACrC;YACF;AACA,YAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAClB;AAEA,QAAA,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,EAAE;AACnC,YAAA,MAAM,gBAAgB,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;YAC3D,MAAM,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAClD,CAAC,CAAC,KAAK,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAChC;AAED,YAAA,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;AAC7B,gBAAA,OAAO,CAAC,IAAI,CAAC,gCAAgC,CAAC;gBAC9C,KAAK,MAAM,KAAK,IAAI,cAAc,CAAC,IAAI,EAAE,EAAE;AACzC,oBAAA,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,KAAK,CAAA,EAAA,EAAK,SAAS,CAAC,KAAK,CAAC,CAAA,CAAA,CAAG,CAAC;gBAClD;YACF;QACF;AAEA,QAAA,OAAO,CAAC,IAAI,CAAC,8CAA8C,CAAC;AAC5D,QAAA,OAAO,CAAC,IAAI,CAAC,uDAAuD,CAAC;AAErE,QAAA,IAAI,YAAY,CAAC,eAAe,EAAE,EAAE;AAClC,YAAA,OAAO,CAAC,IAAI,CACV,6EAA6E,CAC9E;AACD,YAAA,OAAO,CAAC,IAAI,CACV,8DAA8D,CAC/D;QACH;AAEA,QAAA,OAAO,CAAC,GAAG,CAAC,CAAA,uBAAA,EAA0B,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,CAAA,oBAAA,CAAsB,CAAC;QAC3F,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;SAC7D;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,KAAK,CAAC;QACxD,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,WAAW,CAC/B,OAAY,EACZ,GAAgB,EAAA;IAEhB,OAAO,CAAC,GAAG,CAAC,CAAA,wCAAA,EAA2C,OAAO,CAAC,OAAO,IAAI,UAAU,CAAA,CAAE,CAAC;AACvF,IAAA,IAAI;AACF,QAAA,MAAM,EAAE,OAAO,GAAG,UAAU,EAAE,GAAG,OAAO;AAGxC,QAAA,MAAM,QAAQ,GAAG,MAAM,WAAW,EAAE;AACpC,QAAA,IAAI,EAAE,OAAO,IAAI,QAAQ,CAAC,EAAE;YAC1B,MAAM,WAAW,GAAG,qBAAqB,CAAC,OAAO,EAAE,QAAQ,CAAC;YAC5D,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,WAAW,CAAC,CAAA,iBAAA,EAAoB,OAAO,CAAA,GAAA,EAAM,WAAW,EAAE,CAAC;AAClE,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC;AAC/B,QAAA,MAAM,GAAG,GAAG,CAAA,EAAG,SAAS,CAAA,CAAA,EAAI,KAAK,SAAS;QAC1C,MAAM,IAAI,GAAG,IAAI,CAAC,CAAA,EAAG,eAAe,CAAA,CAAA,EAAI,eAAe,CAAA,CAAE,CAAC;QAE1D,IAAI,QAAQ,GAAG,CAAC;QAChB,IAAI,QAAQ,GAAG,CAAC;AAEhB,QAAA,IAAI;AACF,YAAA,MAAM,OAAO,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE;AAC/B,gBAAA,MAAM,EAAE,MAAM;AACd,gBAAA,OAAO,EAAE;oBACP,aAAa,EAAE,CAAA,MAAA,EAAS,IAAI,CAAA,CAAE;AAC9B,oBAAA,cAAc,EAAE,kBAAkB;AACnC,iBAAA;AACD,gBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC;AAC/D,aAAA,CAAC;AACF,YAAA,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACpC,YAAA,QAAQ,GAAG,OAAO,CAAC,KAAK,IAAI,CAAC;QAC/B;QAAE,OAAO,KAAK,EAAE;;QAEhB;AAEA,QAAA,IAAI;AACF,YAAA,MAAM,OAAO,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE;AAC/B,gBAAA,MAAM,EAAE,MAAM;AACd,gBAAA,OAAO,EAAE;oBACP,aAAa,EAAE,CAAA,MAAA,EAAS,IAAI,CAAA,CAAE;AAC9B,oBAAA,cAAc,EAAE,kBAAkB;AACnC,iBAAA;AACD,gBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;AAC9D,aAAA,CAAC;AACF,YAAA,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACpC,YAAA,QAAQ,GAAG,OAAO,CAAC,KAAK,IAAI,CAAC;QAC/B;QAAE,OAAO,KAAK,EAAE;;QAEhB;QAEA,IAAI,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,EAAE;YACpC,OAAO;AACL,gBAAA,OAAO,EAAE;oBACP,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,+BAA+B,CAAC,EAAE;AACrE,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,MAAM,GAAG,CAAA,qBAAA,EAAwB,OAAO,0BAA0B,QAAQ,CAAC,cAAc,EAAE,gBAAgB,QAAQ,CAAC,cAAc,EAAE,EAAE;QAE5I,OAAO,CAAC,GAAG,CAAC,CAAA,0CAAA,EAA6C,QAAQ,CAAA,WAAA,EAAc,QAAQ,CAAA,CAAE,CAAC;QAC1F,OAAO;YACL,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;SAC1C;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,KAAK,CAAC;QACrD,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,mBAAmB,CACvC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,CAAA,2CAAA,EAA8C,OAAO,CAAC,KAAK,CAAA,SAAA,EAAY,OAAO,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,CAAC;AACzG,IAAA,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,OAAO;QAErC,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,GAAG,EAAE;AAC5B,YAAA,OAAO,CAAC,IAAI,CAAC,uCAAuC,KAAK,CAAA,CAAE,CAAC;YAC5D,OAAO;AACL,gBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,qBAAqB,CAAC,EAAE,CAAC;AACrE,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CACpC,gBAAgB,EAChB,KAAK,EACL,EAAE,EACF,KAAK,CACN;AAED,QAAA,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AACxB,YAAA,OAAO,CAAC,GAAG,CAAC,qDAAqD,KAAK,CAAA,CAAA,CAAG,CAAC;YAC1E,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,CAAA,wCAAA,EAA2C,KAAK,CAAA,CAAA,CAAG;AAC1D,qBAAA;AACF,iBAAA;aACF;QACH;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,4BAAA,EAA+B,OAAO,CAAC,MAAM,CAAA,oBAAA,EAAuB,KAAK,CAAA,CAAA,CAAG,CAAC;QAEzF,MAAM,OAAO,GAAa,EAAE;QAC5B,OAAO,CAAC,IAAI,CACV,CAAA,MAAA,EAAS,OAAO,CAAC,MAAM,CAAA,gCAAA,EAAmC,KAAK,CAAA,IAAA,CAAM,CACtE;AAED,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;AAC7B,YAAA,IAAI,GAAG,CAAC,IAAI,EAAE;gBACZ,OAAO,CAAC,IAAI,CAAC,CAAA,QAAA,EAAW,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;YACrC;AACA,YAAA,IAAI,GAAG,CAAC,WAAW,EAAE;gBACnB,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAC,WAAW,CAAA,CAAE,CAAC;YACtC;AACA,YAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAClB;QAEA,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;SAC7D;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC;QAC7D,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,iBAAiB,CACrC,OAAY,EACZ,GAAgB,EAAA;IAEhB,OAAO,CAAC,GAAG,CAAC,CAAA,2CAAA,EAA8C,OAAO,CAAC,IAAI,CAAA,CAAA,CAAG,CAAC;AAC1E,IAAA,IAAI;AACF,QAAA,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO;AAExB,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CACpC,gBAAgB,EAChB,IAAI,EACJ,EAAE,EACF,GAAG,CACJ;AAED,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;AACzB,YAAA,IAAI,GAAG,CAAC,IAAI,KAAK,IAAI,EAAE;gBACrB,MAAM,IAAI,GAAa,EAAE;AACzB,gBAAA,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAA,CAAE,CAAC;AAC5B,gBAAA,IAAI,GAAG,CAAC,IAAI,EAAE;oBACZ,IAAI,CAAC,IAAI,CAAC,CAAA,MAAA,EAAS,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;gBAChC;AACA,gBAAA,IAAI,GAAG,CAAC,WAAW,EAAE;oBACnB,IAAI,CAAC,IAAI,CAAC,CAAA,aAAA,EAAgB,GAAG,CAAC,WAAW,CAAA,CAAE,CAAC;gBAC9C;gBACA,OAAO;AACL,oBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;iBACnD;YACH;QACF;AAEA,QAAA,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YACtB,MAAM,WAAW,GAAa,EAAE;AAChC,YAAA,KAAK,MAAM,GAAG,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AACrC,gBAAA,IACE,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnD,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,GAAG,CAAC,EAC/B;AACA,oBAAA,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;gBAC5B;YACF;AAEA,YAAA,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC1B,MAAM,GAAG,GAAG,CAAA,QAAA,EAAW,IAAI,CAAA,yCAAA,EAA4C,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAA,IAAA,EAAO,CAAC,CAAA,CAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,6CAAA,EAAgD,IAAI,CAAA,0CAAA,CAA4C;gBACpN,OAAO;AACL,oBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,EAAE,CAAC;AAChE,oBAAA,OAAO,EAAE,IAAI;iBACd;YACH;QACF;AAEA,QAAA,MAAM,GAAG,GAAG,CAAA,QAAA,EAAW,IAAI,CAAA,uDAAA,EAA0D,IAAI,iCAAiC;QAC1H,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,EAAE,CAAC;AAChE,YAAA,OAAO,EAAE,IAAI;SACd;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,qCAAqC,EAAE,KAAK,CAAC;QAC3D,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,kBAAkB,CACtC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,sDAAsD,CAAC;AACnE,IAAA,IAAI;AACF,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CACpC,gBAAgB,EAChB,EAAE,EACF,EAAE,EACF,KAAK,CACN;AAED,QAAA,MAAM,UAAU,GAAG,IAAI,GAAG,EAAU;AACpC,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,MAAM,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AACjC,YAAA,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBACpB,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC1B;QACF;AAEA,QAAA,MAAM,MAAM,GAAG,CAAA,2CAAA,EAA8C,OAAO,CAAC,MAAM,CAAC,cAAc,EAAE,CAAA,0BAAA,EAA6B,UAAU,CAAC,IAAI,EAAE;AAE1I,QAAA,OAAO,CAAC,GAAG,CAAC,CAAA,2BAAA,EAA8B,OAAO,CAAC,MAAM,CAAA,YAAA,EAAe,UAAU,CAAC,IAAI,CAAA,WAAA,CAAa,CAAC;QACpG,OAAO;YACL,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;SAC1C;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,sCAAsC,EAAE,KAAK,CAAC;QAC5D,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,yBAAyB,CAC7C,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,2DAA2D,CAAC;AACxE,IAAA,IAAI;AACF,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CACpC,gBAAgB,EAChB,EAAE,EACF,EAAE,EACF,KAAK,CACN;AAED,QAAA,MAAM,UAAU,GAAG,IAAI,GAAG,EAAkB;AAC5C,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,MAAM,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AACjC,YAAA,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AACpB,gBAAA,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC;AACpB,gBAAA,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrD;QACF;QAEA,MAAM,OAAO,GAAa,EAAE;QAC5B,OAAO,CAAC,IAAI,CACV,CAAA,gCAAA,EAAmC,UAAU,CAAC,IAAI,CAAA,UAAA,CAAY,CAC/D;QAED,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,EAAE,EAAE;YAClE,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAA,EAAA,EAAK,KAAK,CAAA,SAAA,CAAW,CAAC;QAC7C;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,kCAAA,EAAqC,UAAU,CAAC,IAAI,CAAA,WAAA,CAAa,CAAC;QAC9E,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;SACtD;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,6CAA6C,EAAE,KAAK,CAAC;QACnE,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,8BAA8B,CAClD,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,CAAA,8DAAA,EAAiE,OAAO,CAAC,MAAM,CAAA,SAAA,EAAY,OAAO,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,CAAC;AAC7H,IAAA,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,OAAO;AAGtC,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CACpC,gBAAgB,EAChB,EAAE,EACF,MAAM,EACN,KAAK,CACN;AAED,QAAA,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,CAAA,2CAAA,EAA8C,MAAM,CAAA,CAAA,CAAG;AAC9D,qBAAA;AACF,iBAAA;aACF;QACH;QAEA,MAAM,OAAO,GAAa,EAAE;QAC5B,OAAO,CAAC,IAAI,CACV,CAAA,kCAAA,EAAqC,MAAM,CAAA,WAAA,EAAc,OAAO,CAAC,MAAM,CAAA,IAAA,CAAM,CAC9E;AAED,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;AAC7B,YAAA,IAAI,GAAG,CAAC,IAAI,EAAE;gBACZ,OAAO,CAAC,IAAI,CAAC,CAAA,QAAA,EAAW,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;YACrC;AACA,YAAA,IAAI,GAAG,CAAC,WAAW,EAAE;gBACnB,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAC,WAAW,CAAA,CAAE,CAAC;YACtC;AACA,YAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAClB;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,uCAAA,EAA0C,OAAO,CAAC,MAAM,CAAA,sBAAA,EAAyB,MAAM,CAAA,CAAA,CAAG,CAAC;QACvG,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;SAC7D;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,kDAAkD,EAAE,KAAK,CAAC;QACxE,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,aAAa,CACjC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,CAAA,qCAAA,EAAwC,OAAO,CAAC,KAAK,CAAA,SAAA,EAAY,OAAO,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,CAAC;AACnG,IAAA,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,OAAO;QAErC,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,GAAG,EAAE;AAC5B,YAAA,OAAO,CAAC,IAAI,CAAC,iCAAiC,KAAK,CAAA,CAAE,CAAC;YACtD,OAAO;AACL,gBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,qBAAqB,CAAC,EAAE,CAAC;AACrE,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CACpC,UAAU,EACV,KAAK,EACL,EAAE,EACF,KAAK,CACN;AAED,QAAA,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AACxB,YAAA,OAAO,CAAC,GAAG,CAAC,+CAA+C,KAAK,CAAA,CAAA,CAAG,CAAC;YACpE,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,CAAA,sCAAA,EAAyC,KAAK,CAAA,CAAA,CAAG;AACxD,qBAAA;AACF,iBAAA;aACF;QACH;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,sBAAA,EAAyB,OAAO,CAAC,MAAM,CAAA,oBAAA,EAAuB,KAAK,CAAA,CAAA,CAAG,CAAC;QAEnF,MAAM,OAAO,GAAa,EAAE;QAC5B,OAAO,CAAC,IAAI,CACV,CAAA,MAAA,EAAS,OAAO,CAAC,MAAM,CAAA,8BAAA,EAAiC,KAAK,CAAA,IAAA,CAAM,CACpE;AAED,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;AAC7B,YAAA,IAAI,GAAG,CAAC,IAAI,EAAE;gBACZ,OAAO,CAAC,IAAI,CAAC,CAAA,QAAA,EAAW,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;YACrC;AACA,YAAA,IAAI,GAAG,CAAC,WAAW,EAAE;gBACnB,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAC,WAAW,CAAA,CAAE,CAAC;YACtC;AACA,YAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAClB;QAEA,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;SAC7D;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,iCAAiC,EAAE,KAAK,CAAC;QACvD,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,WAAW,CAC/B,OAAY,EACZ,GAAgB,EAAA;IAEhB,OAAO,CAAC,GAAG,CAAC,CAAA,qCAAA,EAAwC,OAAO,CAAC,IAAI,CAAA,CAAA,CAAG,CAAC;AACpE,IAAA,IAAI;AACF,QAAA,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO;AAExB,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CAAC,UAAU,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC;AAEjE,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;AACzB,YAAA,IAAI,GAAG,CAAC,IAAI,KAAK,IAAI,EAAE;gBACrB,MAAM,IAAI,GAAa,EAAE;AACzB,gBAAA,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAA,CAAE,CAAC;AAC5B,gBAAA,IAAI,GAAG,CAAC,IAAI,EAAE;oBACZ,IAAI,CAAC,IAAI,CAAC,CAAA,MAAA,EAAS,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;gBAChC;AACA,gBAAA,IAAI,GAAG,CAAC,WAAW,EAAE;oBACnB,IAAI,CAAC,IAAI,CAAC,CAAA,aAAA,EAAgB,GAAG,CAAC,WAAW,CAAA,CAAE,CAAC;gBAC9C;gBACA,OAAO;AACL,oBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;iBACnD;YACH;QACF;AAEA,QAAA,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YACtB,MAAM,WAAW,GAAa,EAAE;AAChC,YAAA,KAAK,MAAM,GAAG,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AACrC,gBAAA,IACE,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnD,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,GAAG,CAAC,EAC/B;AACA,oBAAA,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;gBAC5B;YACF;AAEA,YAAA,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC1B,MAAM,GAAG,GAAG,CAAA,QAAA,EAAW,IAAI,CAAA,yCAAA,EAA4C,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAA,IAAA,EAAO,CAAC,CAAA,CAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,uCAAA,EAA0C,IAAI,CAAA,0CAAA,CAA4C;gBAC9M,OAAO;AACL,oBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,EAAE,CAAC;AAChE,oBAAA,OAAO,EAAE,IAAI;iBACd;YACH;QACF;AAEA,QAAA,MAAM,GAAG,GAAG,CAAA,QAAA,EAAW,IAAI,CAAA,iDAAA,EAAoD,IAAI,iCAAiC;QACpH,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,EAAE,CAAC;AAChE,YAAA,OAAO,EAAE,IAAI;SACd;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,KAAK,CAAC;QACrD,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,YAAY,CAChC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC;AACvD,IAAA,IAAI;AACF,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,EAAE,KAAK,CAAC;AAEjE,QAAA,MAAM,UAAU,GAAG,IAAI,GAAG,EAAU;AACpC,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,MAAM,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AACjC,YAAA,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBACpB,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC1B;QACF;AAEA,QAAA,MAAM,MAAM,GAAG,CAAA,yCAAA,EAA4C,OAAO,CAAC,MAAM,CAAC,cAAc,EAAE,CAAA,0BAAA,EAA6B,UAAU,CAAC,IAAI,EAAE;AAExI,QAAA,OAAO,CAAC,GAAG,CAAC,CAAA,qBAAA,EAAwB,OAAO,CAAC,MAAM,CAAA,YAAA,EAAe,UAAU,CAAC,IAAI,CAAA,WAAA,CAAa,CAAC;QAC9F,OAAO;YACL,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;SAC1C;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,CAAC;QACtD,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,mBAAmB,CACvC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,4DAA4D,CAAC;AACzE,IAAA,IAAI;AACF,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,EAAE,KAAK,CAAC;AAEjE,QAAA,MAAM,UAAU,GAAG,IAAI,GAAG,EAAkB;AAC5C,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,MAAM,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AACjC,YAAA,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AACpB,gBAAA,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC;AACpB,gBAAA,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrD;QACF;QAEA,MAAM,OAAO,GAAa,EAAE;QAC5B,OAAO,CAAC,IAAI,CAAC,CAAA,8BAAA,EAAiC,UAAU,CAAC,IAAI,CAAA,UAAA,CAAY,CAAC;QAE1E,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,EAAE,EAAE;YAClE,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAA,EAAA,EAAK,KAAK,CAAA,SAAA,CAAW,CAAC;QAC7C;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,4BAAA,EAA+B,UAAU,CAAC,IAAI,CAAA,WAAA,CAAa,CAAC;QACxE,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;SACtD;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC;QAC7D,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,wBAAwB,CAC5C,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,CAAA,wDAAA,EAA2D,OAAO,CAAC,MAAM,CAAA,SAAA,EAAY,OAAO,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,CAAC;AACvH,IAAA,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,OAAO;AAEtC,QAAA,MAAM,OAAO,GAAG,MAAM,gBAAgB,CACpC,UAAU,EACV,EAAE,EACF,MAAM,EACN,KAAK,CACN;AAED,QAAA,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,CAAA,yCAAA,EAA4C,MAAM,CAAA,CAAA,CAAG;AAC5D,qBAAA;AACF,iBAAA;aACF;QACH;QAEA,MAAM,OAAO,GAAa,EAAE;QAC5B,OAAO,CAAC,IAAI,CACV,CAAA,gCAAA,EAAmC,MAAM,CAAA,WAAA,EAAc,OAAO,CAAC,MAAM,CAAA,IAAA,CAAM,CAC5E;AAED,QAAA,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACzB,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;AAC7B,YAAA,IAAI,GAAG,CAAC,IAAI,EAAE;gBACZ,OAAO,CAAC,IAAI,CAAC,CAAA,QAAA,EAAW,GAAG,CAAC,IAAI,CAAA,CAAE,CAAC;YACrC;AACA,YAAA,IAAI,GAAG,CAAC,WAAW,EAAE;gBACnB,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,GAAG,CAAC,WAAW,CAAA,CAAE,CAAC;YACtC;AACA,YAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAClB;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,iCAAA,EAAoC,OAAO,CAAC,MAAM,CAAA,sBAAA,EAAyB,MAAM,CAAA,CAAA,CAAG,CAAC;QACjG,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;SAC7D;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,4CAA4C,EAAE,KAAK,CAAC;QAClE,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,kBAAkB,CACtC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,gDAAgD,CAAC;AAC7D,IAAA,IAAI;QACF,MAAM,UAAU,GAAG,wBAAwB;QAC3C,MAAM,IAAI,GAAG,IAAI,CAAC,CAAA,EAAG,eAAe,CAAA,CAAA,EAAI,eAAe,CAAA,CAAE,CAAC;QAE1D,MAAM,SAAS,GAAG,MAAM,KAAK,CAAC,GAAG,SAAS,CAAA,CAAA,EAAI,UAAU,CAAA,OAAA,CAAS,EAAE;AACjE,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,OAAO,EAAE;gBACP,aAAa,EAAE,CAAA,MAAA,EAAS,IAAI,CAAA,CAAE;AAC9B,gBAAA,cAAc,EAAE,kBAAkB;AACnC,aAAA;AACD,YAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC;AAC/D,SAAA,CAAC;AAEF,QAAA,MAAM,SAAS,GAAG,MAAM,SAAS,CAAC,IAAI,EAAE;AACxC,QAAA,MAAM,aAAa,GAAG,SAAS,CAAC,KAAK,IAAI,CAAC;QAE1C,MAAM,OAAO,GAAa,EAAE;AAC5B,QAAA,OAAO,CAAC,IAAI,CAAC,0BAA0B,CAAC;QACxC,OAAO,CAAC,IAAI,CAAC,CAAA,oBAAA,EAAuB,aAAa,CAAC,cAAc,EAAE,CAAA,CAAE,CAAC;AACrE,QAAA,OAAO,CAAC,IAAI,CACV,yFAAyF,CAC1F;AAED,QAAA,OAAO,CAAC,GAAG,CAAC,8BAA8B,aAAa,CAAA,OAAA,CAAS,CAAC;QACjE,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;SACtD;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,sCAAsC,EAAE,KAAK,CAAC;QAC5D,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,mBAAmB,CACvC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,CAAA,kDAAA,EAAqD,OAAO,CAAC,KAAK,CAAA,SAAA,EAAY,OAAO,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,CAAC;AAChH,IAAA,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,OAAO;QAErC,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,GAAG,EAAE;AAC5B,YAAA,OAAO,CAAC,IAAI,CAAC,uCAAuC,KAAK,CAAA,CAAE,CAAC;YAC5D,OAAO;AACL,gBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,qBAAqB,CAAC,EAAE,CAAC;AACrE,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;QAEA,MAAM,UAAU,GAAG,wBAAwB;AAC3C,QAAA,MAAM,UAAU,GAAG;AACjB,YAAA,IAAI,EAAE;gBACJ,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,CAAC;AACrC,gBAAA,MAAM,EAAE;AACN,oBAAA,EAAE,KAAK,EAAE,EAAE,aAAa,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,EAAE;AACjD,oBAAA,EAAE,KAAK,EAAE,EAAE,mBAAmB,EAAE,KAAK,EAAE,EAAE;AACzC,oBAAA,EAAE,KAAK,EAAE,EAAE,UAAU,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,EAAE;AAC/C,iBAAA;AACD,gBAAA,oBAAoB,EAAE,CAAC;AACxB,aAAA;SACF;AAED,QAAA,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,UAAU,EAAE,UAAU,EAAE,KAAK,GAAG,CAAC,CAAC;AAE7D,QAAA,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACrB,YAAA,OAAO,CAAC,GAAG,CAAC,qDAAqD,KAAK,CAAA,CAAA,CAAG,CAAC;YAC1E,OAAO;AACL,gBAAA,OAAO,EAAE;oBACP,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAA,0BAAA,EAA6B,KAAK,CAAA,CAAA,CAAG,EAAE;AAC9D,iBAAA;aACF;QACH;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,4BAAA,EAA+B,IAAI,CAAC,MAAM,CAAA,oBAAA,EAAuB,KAAK,CAAA,CAAA,CAAG,CAAC;;AAGtF,QAAA,MAAM,UAAU,GAAG,IAAI,GAAG,EAAU;QACpC,MAAM,UAAU,GAAG,EAAE;AAErB,QAAA,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;AACtB,YAAA,MAAM,GAAG,GAAG,GAAG,CAAC,OAAO,IAAI,EAAE;AAC7B,YAAA,MAAM,SAAS,GAAG,GAAG,CAAC,UAAU,IAAI,EAAE;YACtC,IAAI,SAAS,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;AAC3C,gBAAA,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC;AACzB,gBAAA,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC;AACpB,gBAAA,IAAI,UAAU,CAAC,MAAM,IAAI,KAAK;oBAAE;YAClC;QACF;QAEA,MAAM,OAAO,GAAa,EAAE;QAC5B,OAAO,CAAC,IAAI,CAAC,CAAA,MAAA,EAAS,UAAU,CAAC,MAAM,CAAA,kBAAA,EAAqB,KAAK,CAAA,IAAA,CAAM,CAAC;AAExE,QAAA,KAAK,MAAM,GAAG,IAAI,UAAU,EAAE;AAC5B,YAAA,MAAM,GAAG,GAAG,GAAG,CAAC,OAAO,IAAI,EAAE;AAC7B,YAAA,MAAM,SAAS,GAAG,GAAG,CAAC,UAAU,IAAI,EAAE;AACtC,YAAA,MAAM,IAAI,GAAG,GAAG,CAAC,mBAAmB,IAAI,EAAE;AAC1C,YAAA,MAAM,QAAQ,GAAG,GAAG,CAAC,cAAc,IAAI,EAAE;AACzC,YAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,GAAG,IAAI,EAAE;AAE9B,YAAA,OAAO,CAAC,IAAI,CAAC,KAAK,SAAS,CAAA,CAAE,CAAC;YAC9B,IAAI,IAAI,EAAE;AACR,gBAAA,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,CAAA,CAAE,CAAC;YAC3B;YACA,IAAI,GAAG,EAAE;AACP,gBAAA,OAAO,CAAC,IAAI,CAAC,UAAU,GAAG,CAAA,CAAE,CAAC;YAC/B;AACA,YAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAClB;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,gCAAA,EAAmC,UAAU,CAAC,MAAM,CAAA,cAAA,CAAgB,CAAC;QACjF,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;SAC7D;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC;QAC7D,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,uBAAuB,CAC3C,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,CAAA,wDAAA,EAA2D,OAAO,CAAC,YAAY,CAAA,SAAA,EAAY,OAAO,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,CAAC;AAC7H,IAAA,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,OAAO;QAG5C,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,EAAE;YACzC,OAAO;AACL,gBAAA,OAAO,EAAE;oBACP,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,0BAA0B,CAAC,EAAE;AAChE,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;QAEA,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;YAC5C,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;AACZ,wBAAA,IAAI,EAAE,WAAW,CACf,yFAAyF,CAC1F;AACF,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;QAEA,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,EAAE,EAAE;YAC3B,OAAO;AACL,gBAAA,OAAO,EAAE;oBACP,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,gCAAgC,CAAC,EAAE;AACtE,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,GAAG,GAAG,CAAA,+BAAA,EAAkC,YAAY,gDAAgD;AAE1G,QAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE;AAChC,YAAA,OAAO,EAAE;AACP,gBAAA,MAAM,EAAE,kBAAkB;AAC1B,gBAAA,YAAY,EAAE,eAAe;AAC9B,aAAA;AACF,SAAA,CAAC;AAEF,QAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,GAAG,EAAE;YAC3B,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,WAAW,CACf,CAAA,SAAA,EAAY,YAAY,CAAA,qBAAA,CAAuB,EAC/C,WAAW,CACZ;AACF,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,IAAI,QAAQ,CAAC,MAAM,IAAI,GAAG,EAAE;YAC1B,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;AACZ,wBAAA,IAAI,EAAE,WAAW,CACf,wCAAwC,EACxC,eAAe,CAChB;AACF,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AAElC,QAAA,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YAC5B,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;AACZ,wBAAA,IAAI,EAAE,WAAW,CAAC,qCAAqC,CAAC;AACzD,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;AAEA,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE;AAClC,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,EAAE;AAEpC,QAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YACzB,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,CAAA,SAAA,EAAY,YAAY,CAAA,wCAAA,CAA0C;AACzE,qBAAA;AACF,iBAAA;aACF;QACH;QAEA,MAAM,OAAO,GAAa,EAAE;AAC5B,QAAA,OAAO,CAAC,IAAI,CAAC,YAAY,YAAY,CAAA,CAAE,CAAC;QACxC,IAAI,OAAO,EAAE;AACX,YAAA,OAAO,CAAC,IAAI,CAAC,gBAAgB,OAAO,CAAA,CAAE,CAAC;QACzC;QACA,OAAO,CAAC,IAAI,CAAC,CAAA,gBAAA,EAAmB,QAAQ,CAAC,MAAM,CAAA,CAAE,CAAC;AAClD,QAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAEhB,MAAM,aAAa,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC;AAC9C,QAAA,OAAO,CAAC,IAAI,CACV,CAAA,yBAAA,EAA4B,aAAa,CAAC,MAAM,CAAA,IAAA,EAAO,QAAQ,CAAC,MAAM,CAAA,IAAA,CAAM,CAC7E;AAED,QAAA,KAAK,MAAM,OAAO,IAAI,aAAa,EAAE;AACnC,YAAA,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,EAAE;AACrC,YAAA,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,EAAE;AAEzC,YAAA,OAAO,CAAC,IAAI,CAAC,cAAc,OAAO,CAAA,CAAE,CAAC;AAErC,YAAA,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;AACxB,gBAAA,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;AAChC,oBAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,IAAI,EAAE;AAClC,oBAAA,MAAM,MAAM,GAAG,QAAQ,CAAC,WAAW,IAAI,EAAE;AACzC,oBAAA,MAAM,QAAQ,GAAG,QAAQ,CAAC,SAAS,IAAI,EAAE;oBAEzC,IAAI,IAAI,EAAE;AACR,wBAAA,OAAO,CAAC,IAAI,CAAC,eAAe,IAAI,CAAA,CAAE,CAAC;oBACrC;oBACA,IAAI,MAAM,EAAE;AACV,wBAAA,OAAO,CAAC,IAAI,CAAC,aAAa,MAAM,CAAA,CAAE,CAAC;oBACrC;oBACA,IAAI,QAAQ,EAAE;AACZ,wBAAA,OAAO,CAAC,IAAI,CAAC,gBAAgB,QAAQ,CAAA,CAAE,CAAC;oBAC1C;gBACF;YACF;AACA,YAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;QAClB;QAEA,IAAI,aAAa,CAAC,IAAI,CAAC,CAAC,CAAM,KAAK,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,WAAW,CAAC,EAAE;AACjE,YAAA,OAAO,CAAC,IAAI,CAAC,sDAAsD,CAAC;AACpE,YAAA,OAAO,CAAC,IAAI,CAAC,mCAAmC,CAAC;AACjD,YAAA,OAAO,CAAC,IAAI,CAAC,kDAAkD,CAAC;QAClE;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,oCAAA,EAAuC,OAAO,CAAC,MAAM,CAAA,gBAAA,CAAkB,CAAC;QACpF,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;SAC7D;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,2CAA2C,EAAE,KAAK,CAAC;QACjE,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;AAEO,eAAe,mBAAmB,CACvC,OAAY,EACZ,GAAgB,EAAA;AAEhB,IAAA,OAAO,CAAC,GAAG,CAAC,CAAA,uCAAA,EAA0C,OAAO,CAAC,YAAY,CAAA,YAAA,EAAe,OAAO,CAAC,OAAO,CAAA,CAAA,CAAG,CAAC;AAC5G,IAAA,IAAI;AACF,QAAA,MAAM,EAAE,YAAY,EAAE,OAAO,EAAE,GAAG,OAAO;QAGzC,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,EAAE;YACzC,OAAO;AACL,gBAAA,OAAO,EAAE;oBACP,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,0BAA0B,CAAC,EAAE;AAChE,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;QAEA,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE;YAC/B,OAAO;AACL,gBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,CAAC,qBAAqB,CAAC,EAAE,CAAC;AACrE,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;QAEA,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;YAC5C,OAAO;AACL,gBAAA,OAAO,EAAE;AACP,oBAAA;AACE,wBAAA,IAAI,EAAE,MAAM;AACZ,wBAAA,IAAI,EAAE,WAAW,CACf,yFAAyF,CAC1F;AACF,qBAAA;AACF,iBAAA;AACD,gBAAA,OAAO,EAAE,IAAI;aACd;QACH;QAEA,MAAM,WAAW,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;QAChC,IAAI,YAAY,GAAQ,IAAI;QAC5B,MAAM,WAAW,GAA6C,EAAE;AAEhE,QAAA,KAAK,MAAM,KAAK,IAAI,WAAW,EAAE;AAC/B,YAAA,MAAM,GAAG,GAAG,CAAA,+BAAA,EAAkC,YAAY,gDAAgD;AAE1G,YAAA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE;AAChC,gBAAA,OAAO,EAAE;AACP,oBAAA,MAAM,EAAE,kBAAkB;AAC1B,oBAAA,YAAY,EAAE,eAAe;AAC9B,iBAAA;AACF,aAAA,CAAC;AAEF,YAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,GAAG,EAAE;gBAC3B,OAAO;AACL,oBAAA,OAAO,EAAE;AACP,wBAAA;AACE,4BAAA,IAAI,EAAE,MAAM;4BACZ,IAAI,EAAE,WAAW,CACf,CAAA,SAAA,EAAY,YAAY,CAAA,qBAAA,CAAuB,EAC/C,WAAW,CACZ;AACF,yBAAA;AACF,qBAAA;AACD,oBAAA,OAAO,EAAE,IAAI;iBACd;YACH;AAEA,YAAA,IAAI,QAAQ,CAAC,MAAM,IAAI,GAAG,EAAE;gBAC1B,OAAO;AACL,oBAAA,OAAO,EAAE;AACP,wBAAA;AACE,4BAAA,IAAI,EAAE,MAAM;AACZ,4BAAA,IAAI,EAAE,WAAW,CACf,wCAAwC,EACxC,eAAe,CAChB;AACF,yBAAA;AACF,qBAAA;AACD,oBAAA,OAAO,EAAE,IAAI;iBACd;YACH;AAEA,YAAA,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AAClC,YAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,EAAE;AAEpC,YAAA,KAAK,MAAM,OAAO,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE;AAC9C,gBAAA,MAAM,cAAc,GAAG,OAAO,CAAC,OAAO,IAAI,EAAE;AAE5C,gBAAA,IACE,cAAc;AACd,oBAAA,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,KAAK,cAAc,CAAC,EACtD;oBACA,WAAW,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,OAAO,EAAE,CAAC;gBACxD;AAEA,gBAAA,IAAI,cAAc,KAAK,OAAO,EAAE;oBAC9B,YAAY,GAAG,OAAO;oBACtB;gBACF;YACF;AAEA,YAAA,IAAI,YAAY;gBAAE;QACpB;QAEA,IAAI,YAAY,EAAE;YAChB,MAAM,OAAO,GAAa,EAAE;YAC5B,OAAO,CAAC,IAAI,CAAC,CAAA,QAAA,EAAW,YAAY,CAAA,SAAA,EAAY,OAAO,CAAA,EAAA,CAAI,CAAC;AAE5D,YAAA,MAAM,SAAS,GAAG,YAAY,CAAC,SAAS,IAAI,EAAE;AAC9C,YAAA,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;AACxB,gBAAA,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;AAChC,oBAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,IAAI,EAAE;AAClC,oBAAA,MAAM,MAAM,GAAG,QAAQ,CAAC,WAAW,IAAI,EAAE;AACzC,oBAAA,MAAM,QAAQ,GAAG,QAAQ,CAAC,SAAS,IAAI,EAAE;oBAEzC,IAAI,IAAI,EAAE;AACR,wBAAA,OAAO,CAAC,IAAI,CAAC,aAAa,IAAI,CAAA,CAAE,CAAC;oBACnC;oBACA,IAAI,MAAM,EAAE;AACV,wBAAA,OAAO,CAAC,IAAI,CAAC,WAAW,MAAM,CAAA,CAAE,CAAC;oBACnC;oBACA,IAAI,QAAQ,EAAE;AACZ,wBAAA,OAAO,CAAC,IAAI,CAAC,cAAc,QAAQ,CAAA,CAAE,CAAC;oBACxC;AACA,oBAAA,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;gBAClB;YACF;AAEA,YAAA,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;AACtB,YAAA,OAAO,CAAC,IAAI,CAAC,yCAAyC,CAAC;AACvD,YAAA,OAAO,CAAC,IAAI,CAAC,qCAAqC,CAAC;YAEnD,OAAO;AACL,gBAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;aAC7D;QACH;QAEA,MAAM,OAAO,GAAa,EAAE;QAC5B,OAAO,CAAC,IAAI,CAAC,CAAA,EAAA,EAAK,YAAY,CAAA,SAAA,EAAY,OAAO,CAAA,sBAAA,CAAwB,CAAC;AAE1E,QAAA,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1B,OAAO,CAAC,IAAI,CAAC,CAAA,4BAAA,EAA+B,WAAW,CAAC,MAAM,CAAA,QAAA,CAAU,CAAC;YAEzE,MAAM,cAAc,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAC3C,eAAe,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,CAAC,CACtC;YACD,MAAM,MAAM,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO;AACxC,YAAA,MAAM,MAAM,GAAG,cAAc,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,OAAO;AAEhE,YAAA,OAAO,CAAC,IAAI,CAAC,aAAa,MAAM,CAAA,CAAE,CAAC;AACnC,YAAA,OAAO,CAAC,IAAI,CAAC,aAAa,MAAM,CAAA,CAAE,CAAC;AAEnC,YAAA,MAAM,aAAa,GAAG,IAAI,GAAG,EAAU;AACvC,YAAA,KAAK,MAAM,CAAC,IAAI,WAAW,EAAE;gBAC3B,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;AAClC,gBAAA,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;oBACpB,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC7B;YACF;AAEA,YAAA,IAAI,aAAa,CAAC,IAAI,GAAG,CAAC,EAAE;gBAC1B,OAAO,CAAC,IAAI,CACV,CAAA,4BAAA,EAA+B,KAAK,CAAC,IAAI,CAAC,aAAa;AACpD,qBAAA,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;AACxC,qBAAA,IAAI,CAAC,IAAI,CAAC,CAAA,CAAE,CAChB;YACH;AAEA,YAAA,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC;AAC/B,YAAA,OAAO,CAAC,IAAI,CAAC,mCAAmC,CAAC;AACjD,YAAA,OAAO,CAAC,IAAI,CAAC,8CAA8C,CAAC;AAC5D,YAAA,OAAO,CAAC,IAAI,CAAC,mDAAmD,CAAC;AACjE,YAAA,OAAO,CAAC,IAAI,CACV,kEAAkE,CACnE;QACH;QAEA,OAAO,CAAC,GAAG,CAAC,CAAA,2CAAA,EAA8C,YAAY,CAAA,CAAA,EAAI,OAAO,CAAA,CAAE,CAAC;QACpF,OAAO;AACL,YAAA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;SACtD;IACH;IAAE,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC;QAC7D,OAAO;AACL,YAAA,OAAO,EAAE;AACP,gBAAA;AACE,oBAAA,IAAI,EAAE,MAAM;AACZ,oBAAA,IAAI,EAAE,WAAW,CACf,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CACvD;AACF,iBAAA;AACF,aAAA;AACD,YAAA,OAAO,EAAE,IAAI;SACd;IACH;AACF;;;;"}